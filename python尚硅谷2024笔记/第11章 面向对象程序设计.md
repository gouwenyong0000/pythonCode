## é¢å‘å¯¹è±¡çš„åŸºæœ¬æ¦‚å¿µ

åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰ä¸­ï¼Œ**ç±»**å’Œ**å®ä¾‹ï¼ˆå¯¹è±¡ï¼‰**æ˜¯ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œå®ƒä»¬å®šä¹‰äº†å¦‚ä½•ç»„ç»‡å’Œä½¿ç”¨æ•°æ®å’Œæ–¹æ³•ã€‚

### **1. ç±»ï¼ˆClassï¼‰**

ç±»æ˜¯å¯¹è±¡çš„æ¨¡æ¿æˆ–è“å›¾ï¼Œå®šä¹‰äº†ä¸€ç»„å±æ€§ï¼ˆæ•°æ®ï¼‰å’Œæ–¹æ³•ï¼ˆè¡Œä¸ºï¼‰ã€‚å®ƒæè¿°äº†æŸç§äº‹ç‰©çš„ç‰¹æ€§å’ŒåŠŸèƒ½ï¼Œä½†æœ¬èº«å¹¶ä¸ä»£è¡¨å…·ä½“çš„äº‹ç‰©ã€‚

**ç¤ºä¾‹ï¼ˆPython ä»£ç ï¼‰ï¼š**

```python
class Car:
    def __init__(self, brand, model):
        self.brand = brand  # å“ç‰Œ
        self.model = model  # å‹å·
    
    def start(self):
        print(f"{self.brand} {self.model} æ­£åœ¨å¯åŠ¨...")
```

è¿™é‡Œï¼Œ`Car` ç±»å®šä¹‰äº†ä¸€ç§æ±½è½¦çš„é€šç”¨ç»“æ„ï¼Œå…·æœ‰ `brand` å’Œ `model` å±æ€§ï¼Œä»¥åŠ `start()` æ–¹æ³•ã€‚

------

### **2. å®ä¾‹ï¼ˆå¯¹è±¡ï¼ŒInstanceï¼‰**

å¯¹è±¡æ˜¯ç±»çš„å…·ä½“å®ç°ï¼Œä»£è¡¨ä¸€ä¸ªçœŸå®çš„ä¸ªä½“ã€‚ä¸€ä¸ªç±»å¯ä»¥åˆ›å»ºå¤šä¸ªå¯¹è±¡ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„æ•°æ®ã€‚

**ç¤ºä¾‹ï¼ˆåˆ›å»ºå®ä¾‹ï¼‰ï¼š**

```python
my_car = Car("Toyota", "Camry")  # åˆ›å»ºä¸€ä¸ª Toyota Camry çš„å®ä¾‹
my_car.start()  # è°ƒç”¨å®ä¾‹æ–¹æ³•
```

è¾“å‡ºï¼š

```nginx
Toyota Camry æ­£åœ¨å¯åŠ¨...
```

`my_car` æ˜¯ `Car` ç±»çš„ä¸€ä¸ªå…·ä½“å®ä¾‹ï¼Œæ‹¥æœ‰è‡ªå·±çš„ `brand` å’Œ `model` å±æ€§ï¼Œå¹¶å¯ä»¥ä½¿ç”¨ `start()` æ–¹æ³•ã€‚

------

### **ç±»å’Œå®ä¾‹çš„å…³ç³»**

- **ç±»æ˜¯æŠ½è±¡çš„**ï¼Œå®šä¹‰äº†ä¸€ç§ç±»å‹çš„å±æ€§å’Œè¡Œä¸ºã€‚
- **å®ä¾‹æ˜¯å…·ä½“çš„**ï¼Œæ˜¯ç±»çš„å®é™…åº”ç”¨ï¼Œæ‹¥æœ‰å…·ä½“çš„æ•°æ®å’ŒåŠŸèƒ½ã€‚
- **ç±»å°±åƒä¸€ä¸ªæ¨¡å…·ï¼Œå®ä¾‹æ˜¯æ ¹æ®æ¨¡å…·åˆ¶é€ å‡ºæ¥çš„äº§å“**ã€‚



##  ç±»å’Œå®ä¾‹

### ç±»çš„å®šä¹‰

+ classï¼šè¡¨æ˜è¿™æ˜¯ä¸€ä¸ªç±»
+ ClassNameï¼šç±»çš„åå­—
+ ()ï¼šçˆ¶ç±»é›†åˆçš„å¼€å§‹å’Œç»“æŸ
+ objectï¼šçˆ¶ç±»çš„åå­—ï¼Œå®šä¹‰çš„ç±»ç»§æ‰¿è‡ªçˆ¶ç±»ï¼Œå¯ä»¥ä¸å†™ï¼Œé»˜è®¤æ˜¯objectã€‚objectæ˜¯æ‰€æœ‰ç±»çš„ç›´æ¥æˆ–é—´æ¥çˆ¶ç±»

```py
class ClassName:
    <statement-1>
    .
    .
    .
    <statement-N>
```

### ç±»çš„å®ä¾‹åŒ–ï¼ˆåˆ›å»ºå¯¹è±¡ï¼‰

â€¢`å®ä¾‹å = ç±»()` çš„æ–¹å¼å®ä¾‹åŒ–å¯¹è±¡ï¼Œä¸ºç±»åˆ›å»ºä¸€ä¸ªå®ä¾‹

```python
class Player(object): # object åŸºç±»
    pass

tom = Player()  # ç±»çš„å®ä¾‹åŒ–ï¼ˆåˆ›å»ºå¯¹è±¡ï¼‰
print(type(tom)) # <class '__main__.Player'>
print(isinstance(tom,object)) # True
print(isinstance(tom,Player)) # True
```



## å®ä¾‹çš„å±æ€§

### **Python ä¸­çš„å®ä¾‹å±æ€§**

**å®ä¾‹å±æ€§ï¼ˆInstance Attributesï¼‰** æ˜¯ç»‘å®šåˆ°ç‰¹å®šå®ä¾‹çš„å˜é‡ï¼Œæ¯ä¸ªå®ä¾‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„ä¸€ä»½æ•°æ®ï¼Œä¸ä¼šç›¸äº’å½±å“ã€‚

------

### **å®šä¹‰å®ä¾‹å±æ€§**

å®ä¾‹å±æ€§é€šå¸¸åœ¨ `__init__` æ–¹æ³•ï¼ˆæ„é€ å‡½æ•°ï¼‰ä¸­å®šä¹‰ï¼Œå¹¶é€šè¿‡ `self` ç»‘å®šåˆ°å½“å‰å®ä¾‹ï¼š

```python
class Person:
    def __init__(self, name, age):  # æ„é€ å‡½æ•°
        self.name = name  # å®ä¾‹å±æ€§
        self.age = age    # å®ä¾‹å±æ€§

# åˆ›å»ºå®ä¾‹
p1 = Person("Alice", 25)
p2 = Person("Bob", 30)

# è®¿é—®å®ä¾‹å±æ€§
print(p1.name)  # è¾“å‡º: Alice
print(p2.age)   # è¾“å‡º: 30
```

- `self.name` å’Œ `self.age` æ˜¯ **å®ä¾‹å±æ€§**ï¼Œå®ƒä»¬å±äº `p1` å’Œ `p2`ï¼Œè€Œä¸æ˜¯ `Person` ç±»æœ¬èº«ã€‚
- æ¯ä¸ªå®ä¾‹éƒ½æœ‰è‡ªå·±çš„ `name` å’Œ `age`ï¼Œå®ƒä»¬äº’ä¸å½±å“ã€‚

------

### **ä¿®æ”¹å®ä¾‹å±æ€§**

ä½ å¯ä»¥éšæ—¶ä¿®æ”¹å®ä¾‹å±æ€§çš„å€¼ï¼š

```python
p1.age = 26  # ä¿®æ”¹å®ä¾‹å±æ€§
print(p1.age)  # è¾“å‡º: 26
```

è¿™åªä¼šå½±å“ `p1`ï¼Œä¸ä¼šå½±å“ `p2`ï¼š

```python
print(p2.age)  # ä»ç„¶æ˜¯ 30
```

------

### **åŠ¨æ€æ·»åŠ å®ä¾‹å±æ€§**

Python å…è®¸ä½ åœ¨å¯¹è±¡åˆ›å»ºåå†åŠ¨æ€æ·»åŠ æ–°çš„å®ä¾‹å±æ€§ï¼š

```python
p1.gender = "Female"  # ç»™ p1 æ·»åŠ æ–°å±æ€§
print(p1.gender)  # è¾“å‡º: Female

# ä½† p2 æ²¡æœ‰ gender å±æ€§
# print(p2.gender)  # âŒ æŠ¥é”™: 'Person' object has no attribute 'gender'
```

- `p1` æœ‰ `gender` å±æ€§ï¼Œä½† `p2` æ²¡æœ‰ã€‚
- è¿™å°±æ˜¯ **å®ä¾‹å±æ€§å’Œç±»å±æ€§çš„åŒºåˆ«**ï¼šç±»å±æ€§æ˜¯æ‰€æœ‰å®ä¾‹å…±äº«çš„ï¼Œè€Œå®ä¾‹å±æ€§æ˜¯ç‹¬ç«‹çš„ã€‚

------

###  `__dict__` æŸ¥çœ‹å®ä¾‹çš„æ‰€æœ‰å±æ€§

æ¯ä¸ªå®ä¾‹éƒ½æœ‰ä¸€ä¸ª `__dict__` å±æ€§ï¼Œå®ƒå­˜å‚¨äº†è¯¥å®ä¾‹çš„æ‰€æœ‰å±æ€§ï¼š

```python
print(p1.__dict__)  # {'name': 'Alice', 'age': 26, 'gender': 'Female'}
print(p2.__dict__)  # {'name': 'Bob', 'age': 30}
```

- è¿™å¯ä»¥ç”¨æ¥è°ƒè¯•æˆ–æ£€æŸ¥å¯¹è±¡çš„å½“å‰çŠ¶æ€ã€‚

------

### **è®©å®ä¾‹å±æ€§åªèƒ½ç”¨ç±»å®šä¹‰**

ä¸ºäº†é¿å…éšæ„æ·»åŠ å±æ€§ï¼Œå¯ä»¥ä½¿ç”¨ `__slots__`ï¼š

```python
class Student:
    __slots__ = ["name", "age"]  # åªå…è®¸è¿™ä¸¤ä¸ªå±æ€§

    def __init__(self, name, age):
        self.name = name
        self.age = age

s1 = Student("Tom", 20)
s1.name = "Jerry"  # âœ… å…è®¸
# s1.gender = "Male"  # âŒ æŠ¥é”™: 'Student' object has no attribute 'gender'
```

- `__slots__` é™åˆ¶äº† **åªèƒ½æœ‰ `name` å’Œ `age` å±æ€§**ï¼Œä¸èƒ½åŠ¨æ€æ·»åŠ  `gender`ã€‚

------

### **æ€»ç»“**

- **å®ä¾‹å±æ€§** é€šè¿‡ `self` ç»‘å®šåˆ°å®ä¾‹ï¼Œæ¯ä¸ªå®ä¾‹éƒ½æœ‰è‡ªå·±çš„ä¸€ä»½æ•°æ®ã€‚
- **å¯ä»¥ä¿®æ”¹å’ŒåŠ¨æ€æ·»åŠ å®ä¾‹å±æ€§**ï¼Œä½†ä¸ä¼šå½±å“å…¶ä»–å®ä¾‹ã€‚
- **`__dict__` å¯ä»¥æŸ¥çœ‹å®ä¾‹å±æ€§**ï¼Œä½† `__slots__` å¯ä»¥é˜²æ­¢éšæ„æ·»åŠ æ–°å±æ€§ã€‚
- **å®ä¾‹å±æ€§å’Œç±»å±æ€§çš„åŒºåˆ«**ï¼šç±»å±æ€§æ˜¯å…±äº«çš„ï¼Œè€Œå®ä¾‹å±æ€§æ˜¯ç‹¬ç«‹çš„ã€‚

### è¯¾å ‚æ¡ˆä¾‹

```python
class Player(object):
    def __init__(self,name,age,city):  # åˆå§‹åŒ–å‡½æ•°ï¼ˆæ„é€ å‡½æ•°ï¼‰
        self.name = name
        self.age = age
        self.city = city

mia = Player('mia',24,'ä¸Šæµ·')
mia.city = 'æ­å·'
tom = Player('tom',34,'é‡åº†')
tom.height = 180  # æ·»åŠ å±æ€§
tom.age = 32
print(tom.__dict__) # è·å–å®ä¾‹ï¼ˆå¯¹è±¡ï¼‰çš„æ‰€æœ‰å±æ€§

```

```python
# æ­¦å™¨ï¼š åå­— æ”»å‡»å€¼ ç­‰çº§
class weapon(object):
    def __init__(self,name,damage,level):
        self.name = name
        self.damage = damage
        self.level = level

gun = weapon('magic',1000,3)
print(gun.__dict__)
```

## ç±»å±æ€§

**ç±»å±æ€§ï¼ˆClass Attributesï¼‰** æ˜¯ç»‘å®šåˆ°ç±»æœ¬èº«çš„å±æ€§ï¼Œè€Œä¸æ˜¯æŸä¸ªç‰¹å®šçš„å®ä¾‹ã€‚æ‰€æœ‰å®ä¾‹å…±äº«åŒä¸€ä¸ªç±»å±æ€§ï¼Œè€Œå®ä¾‹å±æ€§æ˜¯æ¯ä¸ªå®ä¾‹ç‹¬æœ‰çš„ã€‚

------

### **1. å®šä¹‰å’Œè®¿é—®ç±»å±æ€§**

```python
class Dog:
    species = "Canis familiaris"  # è¿™æ˜¯ç±»å±æ€§ï¼Œæ‰€æœ‰å®ä¾‹å…±äº«

    def __init__(self, name, age):
        self.name = name  # è¿™æ˜¯å®ä¾‹å±æ€§ï¼Œæ¯ä¸ªå®ä¾‹ç‹¬ç«‹
        self.age = age

# è®¿é—®ç±»å±æ€§
print(Dog.species)  # âœ… ç›´æ¥é€šè¿‡ç±»è®¿é—®: Canis familiaris

# é€šè¿‡å®ä¾‹è®¿é—®ç±»å±æ€§
dog1 = Dog("Buddy", 3)
dog2 = Dog("Max", 5)

print(dog1.species)  # âœ… é€šè¿‡å®ä¾‹è®¿é—®: Canis familiaris
print(dog2.species)  # âœ… é€šè¿‡å®ä¾‹è®¿é—®: Canis familiaris
```

- `species` æ˜¯ **ç±»å±æ€§**ï¼Œå®ƒå±äº `Dog` ç±»ï¼Œè€Œä¸æ˜¯æŸä¸ª `Dog` å®ä¾‹ã€‚
- **æ‰€æœ‰å®ä¾‹å…±äº«** `species`ï¼Œè®¿é—®æ—¶ä¼˜å…ˆæŸ¥æ‰¾å®ä¾‹å±æ€§ï¼Œå¦‚æœå®ä¾‹æ²¡æœ‰è¯¥å±æ€§ï¼Œåˆ™ä¼šä½¿ç”¨ç±»å±æ€§ã€‚

------

### **2. ä¿®æ”¹ç±»å±æ€§**

**é€šè¿‡ç±»åä¿®æ”¹ç±»å±æ€§**ï¼Œæ‰€æœ‰å®ä¾‹éƒ½ä¼šå—åˆ°å½±å“ï¼š

```python
Dog.species = "Wolf"

print(dog1.species)  # è¾“å‡º: Wolf
print(dog2.species)  # è¾“å‡º: Wolf
```

- ç›´æ¥ä¿®æ”¹ `Dog.species`ï¼Œä¼šå½±å“æ‰€æœ‰å®ä¾‹ã€‚

**ä½†å¦‚æœåœ¨å®ä¾‹ä¸Šä¿®æ”¹ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹å±æ€§ï¼Œè€Œä¸ä¼šå½±å“ç±»å±æ€§**ï¼š

```python
dog1.species = "Husky"  # è¿™åªä¼šå½±å“ dog1ï¼Œä¸ä¼šå½±å“ dog2 æˆ– Dog ç±»
print(dog1.species)  # è¾“å‡º: Husky
print(dog2.species)  # ä»ç„¶æ˜¯: Wolf
print(Dog.species)   # ä»ç„¶æ˜¯: Wolf
```

- `dog1.species = "Husky"` **åœ¨ `dog1` ä¸Šåˆ›å»ºäº†ä¸€ä¸ªå®ä¾‹å±æ€§**ï¼Œè€Œ `dog2` ä»ç„¶ä½¿ç”¨ `Dog` çš„ç±»å±æ€§ã€‚

------

### **3. ä½¿ç”¨ `@classmethod` ä¿®æ”¹ç±»å±æ€§**

å¦‚æœè¦åœ¨æ–¹æ³•ä¸­ä¿®æ”¹ç±»å±æ€§ï¼Œä½¿ç”¨ `@classmethod`ï¼š

```python
class Cat:
    species = "Feline"

    @classmethod
    def set_species(cls, new_species):
        cls.species = new_species  # ä¿®æ”¹ç±»å±æ€§

# ä¿®æ”¹ç±»å±æ€§
Cat.set_species("Big Cat")

c1 = Cat()
c2 = Cat()
print(c1.species)  # è¾“å‡º: Big Cat
print(c2.species)  # è¾“å‡º: Big Cat
```

- `@classmethod` è®© `set_species` ä½œç”¨äº `Cat` ç±»ï¼Œè€Œä¸æ˜¯æŸä¸ªå®ä¾‹ã€‚

------

### **4. ç±»å±æ€§ vs. å®ä¾‹å±æ€§**

| å±æ€§ç±»å‹     | å®šä¹‰ä½ç½®      | ä½œç”¨èŒƒå›´       | å…±äº«æ€§       | è®¿é—®æ–¹å¼                       |
| ------------ | ------------- | -------------- | ------------ | ------------------------------ |
| **å®ä¾‹å±æ€§** | `self.å±æ€§å` | åªå±äºæŸä¸ªå®ä¾‹ | æ¯ä¸ªå®ä¾‹ç‹¬ç«‹ | `self.å±æ€§å`                  |
| **ç±»å±æ€§**   | `ç±»å.å±æ€§å` | å±äºæ•´ä¸ªç±»     | æ‰€æœ‰å®ä¾‹å…±äº« | `ç±»å.å±æ€§å` æˆ– `å®ä¾‹.å±æ€§å` |

ç¤ºä¾‹ï¼š

```python
class Animal:
    species = "Mammal"  # ç±»å±æ€§

    def __init__(self, name):
        self.name = name  # å®ä¾‹å±æ€§

a1 = Animal("Dog")
a2 = Animal("Cat")

print(a1.name, a1.species)  # è¾“å‡º: Dog Mammal
print(a2.name, a2.species)  # è¾“å‡º: Cat Mammal

# ä¿®æ”¹ç±»å±æ€§ï¼ˆå½±å“æ‰€æœ‰å®ä¾‹ï¼‰
Animal.species = "Reptile"
print(a1.species)  # è¾“å‡º: Reptile
print(a2.species)  # è¾“å‡º: Reptile

# åœ¨å®ä¾‹ä¸Šä¿®æ”¹ï¼Œä¸å½±å“å…¶ä»–å®ä¾‹
a1.species = "Bird"  # åªå½±å“ a1
print(a1.species)  # è¾“å‡º: Bird
print(a2.species)  # è¾“å‡º: Reptile
```

- **ç±»å±æ€§ä¿®æ”¹åï¼Œæ‰€æœ‰å®ä¾‹éƒ½ä¼šå—å½±å“**ã€‚
- **å¦‚æœåœ¨å®ä¾‹ä¸Šèµ‹å€¼ï¼Œä¼šåˆ›å»ºå®ä¾‹å±æ€§ï¼Œå®ä¾‹å±æ€§ä¼šè¦†ç›–ç±»å±æ€§**ã€‚

------

### **5. ä»€ä¹ˆæ—¶å€™ç”¨ç±»å±æ€§ï¼Ÿ**

ç±»å±æ€§é€‚ç”¨äºï¼š

1. **æ‰€æœ‰å®ä¾‹å…±äº«çš„æ•°æ®**ï¼ˆä¾‹å¦‚ï¼šæ‰€æœ‰ç‹—çš„ç‰©ç§éƒ½æ˜¯ `Canis familiaris`ï¼‰ã€‚
2. **å®šä¹‰é»˜è®¤å€¼**ï¼Œå¯ä»¥è¢«å­ç±»æˆ–å®ä¾‹ä¿®æ”¹ï¼ˆä¾‹å¦‚ï¼šæ‰€æœ‰ `Vehicle` é»˜è®¤æ˜¯ `land`ï¼‰ã€‚
3. **è®¡æ•°ã€æ—¥å¿—ç­‰å…¨å±€å…±äº«çš„çŠ¶æ€**ã€‚

ç¤ºä¾‹ï¼š**è®¡ç®—åˆ›å»ºçš„å®ä¾‹æ•°é‡**

```python
class Counter:
    count = 0  # ç±»å±æ€§ï¼Œæ‰€æœ‰å®ä¾‹å…±äº«

    def __init__(self):
        Counter.count += 1  # æ¯æ¬¡åˆ›å»ºå®ä¾‹æ—¶é€’å¢

c1 = Counter()
c2 = Counter()
c3 = Counter()

print(Counter.count)  # è¾“å‡º: 3
```

- `count` æ˜¯ **ç±»å±æ€§**ï¼Œå®ƒåœ¨æ‰€æœ‰å®ä¾‹ä¹‹é—´å…±äº«ï¼Œå¹¶è®°å½•åˆ›å»ºçš„å®ä¾‹æ•°é‡ã€‚

------

### **6. æ€»ç»“**

- **ç±»å±æ€§** å±äºç±»ï¼Œæ‰€æœ‰å®ä¾‹å…±äº«ã€‚
- **å®ä¾‹å±æ€§** åªå±äºæŸä¸ªå®ä¾‹ï¼Œäº’ä¸å½±å“ã€‚
- **ä¿®æ”¹ç±»å±æ€§**ï¼š
  - **ä½¿ç”¨ `ç±»å.å±æ€§`**ï¼ˆå½±å“æ‰€æœ‰å®ä¾‹ï¼‰ã€‚
  - **åœ¨å®ä¾‹ä¸Šä¿®æ”¹åªä¼šåˆ›å»ºæ–°çš„å®ä¾‹å±æ€§**ï¼Œä¸ä¼šå½±å“ç±»å±æ€§ã€‚
- **ä½¿ç”¨ `@classmethod` ç»Ÿä¸€ä¿®æ”¹ç±»å±æ€§**ï¼Œè€Œä¸æ˜¯ `self`ã€‚









```python
class Player(object):
    numbers = 0  # ç±»å±æ€§

    def __init__(self, name, age, city):  # åˆå§‹åŒ–å‡½æ•°ï¼ˆæ„é€ å‡½æ•°ï¼‰
        self.name = name  # å®ä¾‹å±æ€§
        self.age = age
        self.city = city
        Player.numbers += 1  # ç±»å±æ€§ä¿®æ”¹ ç»Ÿè®¡å®ä¾‹çš„ä¸ªæ•°


mia = Player('mia', 24, 'ä¸Šæµ·')
print(mia.__dict__) # {'name': 'mia', 'age': 24, 'city': 'ä¸Šæµ·'} ä¸æ˜¾ç¤ºç±»å±æ€§
print('æ¬¢è¿è£è€€ç‹è€…çš„ç¬¬ %d ä¸ªç©å®¶æ³¨å†Œï¼' % Player.numbers)  # æ¬¢è¿è£è€€ç‹è€…çš„ç¬¬ 1 ä¸ªç©å®¶æ³¨å†Œï¼
tom = Player('tom', 32, 'é‡åº†')
print('æ¬¢è¿è£è€€ç‹è€…çš„ç¬¬ %d ä¸ªç©å®¶æ³¨å†Œï¼' % Player.numbers) # æ¬¢è¿è£è€€ç‹è€…çš„ç¬¬ 2 ä¸ªç©å®¶æ³¨å†Œï¼
```

ç»¼åˆæ¡ˆä¾‹ï¼š

```python
class weapon(object):
    numbers = 0
    max_damage = 10000
    levels = ['é’é“œ', 'ç™½é“¶', 'é»„é‡‘', 'é’»çŸ³', 'ç‹è€…']

    def __init__(self, name, damage, level):
        self.name = name
        self.damage = damage
        self.level = level
        weapon.numbers += 1
        if damage > weapon.max_damage:
            raise Exception('æœ€å¤§çš„ä¼¤å®³å€¼æ˜¯10000ï¼Œè¯·é‡è¯•ï¼')
        if level not in weapon.levels:
            raise Exception('æ®µä½è®¾ç½®é”™è¯¯ï¼')


try:
    gun = weapon('magic', 10000, 'ç‹è€…')
    print(weapon.numbers)
    arrow = weapon('arrow', 450, 'é’é“œ')
    print(weapon.numbers)
except Exception as e:
    print(e)

```



## å®ä¾‹æ–¹æ³•

**å®ä¾‹æ–¹æ³•** æ˜¯å®šä¹‰åœ¨ç±»ä¸­ã€ç”¨äºæ“ä½œå®ä¾‹çš„å‡½æ•°ã€‚å®ƒä»¬çš„ç¬¬ä¸€ä¸ªå‚æ•°é€šå¸¸æ˜¯ `self`ï¼Œè¡¨ç¤ºå½“å‰å®ä¾‹ã€‚å®ä¾‹æ–¹æ³•å¯ä»¥è®¿é—®å’Œä¿®æ”¹ **å®ä¾‹å±æ€§**ï¼Œä¹Ÿå¯ä»¥è°ƒç”¨å…¶ä»– **å®ä¾‹æ–¹æ³•**ã€‚

------

### **1. å®šä¹‰å’Œä½¿ç”¨å®ä¾‹æ–¹æ³•**

```python
class Person:
    def __init__(self, name, age):  # æ„é€ å‡½æ•°
        self.name = name  # å®ä¾‹å±æ€§
        self.age = age

    def introduce(self):  # å®ä¾‹æ–¹æ³•
        return f"My name is {self.name} and I am {self.age} years old."

# åˆ›å»ºå®ä¾‹
p1 = Person("Alice", 25)
p2 = Person("Bob", 30)

# è°ƒç”¨å®ä¾‹æ–¹æ³•
print(p1.introduce())  # è¾“å‡º: My name is Alice and I am 25 years old.
print(p2.introduce())  # è¾“å‡º: My name is Bob and I am 30 years old.
```

- `introduce` æ˜¯ **å®ä¾‹æ–¹æ³•**ï¼Œå®ƒé€šè¿‡ `self` è®¿é—® **å®ä¾‹å±æ€§** `name` å’Œ `age`ã€‚
- **å®ä¾‹æ–¹æ³•åªèƒ½é€šè¿‡å®ä¾‹è°ƒç”¨**ï¼Œä¸èƒ½ç›´æ¥ç”¨ç±»è°ƒç”¨ã€‚

------

### **2. å®ä¾‹æ–¹æ³•å¯ä»¥ä¿®æ”¹å®ä¾‹å±æ€§**

```python
class Car:
    def __init__(self, brand, speed):
        self.brand = brand
        self.speed = speed

    def accelerate(self, increase):
        self.speed += increase
        print(f"{self.brand} is now going at {self.speed} km/h.")

# åˆ›å»ºå®ä¾‹
car1 = Car("Toyota", 60)
car2 = Car("BMW", 80)

# è°ƒç”¨å®ä¾‹æ–¹æ³•ä¿®æ”¹å®ä¾‹å±æ€§
car1.accelerate(20)  # è¾“å‡º: Toyota is now going at 80 km/h.
car2.accelerate(30)  # è¾“å‡º: BMW is now going at 110 km/h.
```

- `accelerate` æ–¹æ³•ä¿®æ”¹ `self.speed`ï¼Œä½† **æ¯ä¸ªå®ä¾‹çš„ `speed` ç‹¬ç«‹ï¼Œä¸ä¼šå½±å“å…¶ä»–å®ä¾‹**ã€‚

------

### **3. å®ä¾‹æ–¹æ³•è°ƒç”¨å…¶ä»–å®ä¾‹æ–¹æ³•**

```python
class BankAccount:
    def __init__(self, owner, balance):
        self.owner = owner
        self.balance = balance

    def deposit(self, amount):
        self.balance += amount
        print(f"Deposited {amount}. New balance: {self.balance}")

    def withdraw(self, amount):
        if self.balance >= amount:
            self.balance -= amount
            print(f"Withdrew {amount}. New balance: {self.balance}")
        else:
            print("Insufficient funds.")

    def show_balance(self):
        return f"{self.owner}'s balance: {self.balance}"

    def transfer(self, other_account, amount):
        if self.balance >= amount:
            self.withdraw(amount)  # è°ƒç”¨å½“å‰å®ä¾‹çš„æ–¹æ³•
            other_account.deposit(amount)  # è°ƒç”¨å¦ä¸€ä¸ªå®ä¾‹çš„æ–¹æ³•
            print(f"Transferred {amount} to {other_account.owner}")
        else:
            print("Insufficient funds for transfer.")

# åˆ›å»ºä¸¤ä¸ªè´¦æˆ·
account1 = BankAccount("Alice", 500)
account2 = BankAccount("Bob", 300)

# è´¦æˆ·æ“ä½œ
account1.deposit(200)  # å­˜æ¬¾
account1.withdraw(100)  # å–æ¬¾
account1.transfer(account2, 200)  # è½¬è´¦

# æŸ¥çœ‹ä½™é¢
print(account1.show_balance())  # è¾“å‡º: Alice's balance: 400
print(account2.show_balance())  # è¾“å‡º: Bob's balance: 500
```

- `transfer` æ–¹æ³•è°ƒç”¨ `withdraw` å’Œ `deposit` æ–¹æ³•æ¥å®Œæˆè½¬è´¦ã€‚

------

### **5. ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å®ä¾‹æ–¹æ³•ï¼Ÿ**

**ä½¿ç”¨å®ä¾‹æ–¹æ³•çš„å…¸å‹åœºæ™¯ï¼š**

1. **è®¿é—®æˆ–ä¿®æ”¹å®ä¾‹å±æ€§**ï¼ˆå¦‚ `self.balance`ï¼‰ã€‚
2. **æ‰§è¡Œä¸æŸä¸ªå®ä¾‹ç›¸å…³çš„é€»è¾‘**ï¼ˆå¦‚ `accelerate` æ–¹æ³•ï¼‰ã€‚
3. **æ“ä½œå¤šä¸ªå®ä¾‹ä¹‹é—´çš„äº¤äº’**ï¼ˆå¦‚ `transfer` æ–¹æ³•ï¼‰ã€‚

å¦‚æœæ–¹æ³• **ä¸éœ€è¦è®¿é—®å®ä¾‹å±æ€§**ï¼š

- **ä½¿ç”¨ `@classmethod`** è®¿é—®ç±»å±æ€§ã€‚
- **ä½¿ç”¨ `@staticmethod`** ä½œä¸ºå·¥å…·å‡½æ•°ã€‚

------

### **6. æ€»ç»“**

âœ… **å®ä¾‹æ–¹æ³•**ï¼š

- é€šè¿‡ `self` è®¿é—®å®ä¾‹å±æ€§ã€‚
- **ä¸èƒ½ç›´æ¥ç”¨ç±»è°ƒç”¨**ï¼Œåªèƒ½é€šè¿‡å®ä¾‹è°ƒç”¨ã€‚
- å¯ä»¥ä¿®æ”¹å®ä¾‹å±æ€§ã€è°ƒç”¨å…¶ä»–å®ä¾‹æ–¹æ³•ã€‚

âœ… **å®ä¾‹æ–¹æ³• vs. ç±»æ–¹æ³• vs. é™æ€æ–¹æ³•**ï¼š

- **å®ä¾‹æ–¹æ³•** (`self`) è®¿é—®å’Œæ“ä½œ **å®ä¾‹å±æ€§**ã€‚
- **ç±»æ–¹æ³•** (`@classmethod`) è®¿é—®å’Œæ“ä½œ **ç±»å±æ€§**ã€‚
- **é™æ€æ–¹æ³•** (`@staticmethod`) æ—¢ä¸è®¿é—®å®ä¾‹ï¼Œä¹Ÿä¸è®¿é—®ç±»å±æ€§ï¼Œä»…ä»…æ˜¯å·¥å…·å‡½æ•°ã€‚

ä½ æ˜¯æƒ³äº†è§£åŸºç¡€æ¦‚å¿µï¼Œè¿˜æ˜¯æœ‰å…·ä½“çš„ä»£ç æƒ³ä¼˜åŒ–ï¼ŸğŸ˜ƒ



```python
class Person:
    def __init__(self, name, age):
        self.name = name  # å®ä¾‹å±æ€§
        self.age = age    # å®ä¾‹å±æ€§

    def introduce(self):  # å®ä¾‹æ–¹æ³•
        print(f"My name is {self.name} and I am {self.age} years old.")

# åˆ›å»ºå®ä¾‹
p1 = Person("Alice", 25)
p2 = Person("Bob", 30)

# è°ƒç”¨å®ä¾‹æ–¹æ³•
p1.introduce()  # è¾“å‡º: My name is Alice and I am 25 years old.
p2.introduce()  # è¾“å‡º: My name is Bob and I am 30 years old.

```

- `introduce` æ˜¯ **å®ä¾‹æ–¹æ³•**ï¼Œå®ƒä½¿ç”¨ `self` è®¿é—®å®ä¾‹å±æ€§ `self.name` å’Œ `self.age`ã€‚
- åªèƒ½é€šè¿‡å®ä¾‹ï¼ˆå¦‚ `p1`ã€`p2`ï¼‰è°ƒç”¨ï¼Œè€Œä¸èƒ½é€šè¿‡ç±»ç›´æ¥è°ƒç”¨ `Person.introduce()`ï¼ˆé™¤éä¼ å…¥å®ä¾‹ï¼‰ã€‚



## ç±»æ–¹æ³•

**ç±»æ–¹æ³•** æ˜¯ç»‘å®šåˆ°ç±»çš„ï¼Œè€Œä¸æ˜¯æŸä¸ªç‰¹å®šå®ä¾‹çš„æ–¹æ³•ã€‚å®ƒä»¬çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ `cls`ï¼Œä»£è¡¨ç±»æœ¬èº«ï¼Œå¯ä»¥ç”¨æ¥ **è®¿é—®å’Œä¿®æ”¹ç±»å±æ€§**ã€‚

------

### **1. å®šä¹‰å’Œè°ƒç”¨ç±»æ–¹æ³•**

**ä½¿ç”¨ `@classmethod` è£…é¥°å™¨å®šä¹‰ç±»æ–¹æ³•**ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯ `cls`ï¼ˆç±»æœ¬èº«ï¼‰ã€‚

```python
class Dog:
    species = "Canis familiaris"  # ç±»å±æ€§

    def __init__(self, name):
        self.name = name  # å®ä¾‹å±æ€§

    @classmethod
    def change_species(cls, new_species):
        cls.species = new_species  # ä¿®æ”¹ç±»å±æ€§

# é€šè¿‡ç±»è°ƒç”¨ç±»æ–¹æ³•
Dog.change_species("Canis lupus")
print(Dog.species)  # è¾“å‡º: Canis lupus

# é€šè¿‡å®ä¾‹è°ƒç”¨ï¼ˆä¸æ¨èï¼Œä½†å¯ä»¥ï¼‰
dog1 = Dog("Buddy")
dog1.change_species("Canis gold")
print(Dog.species)  # è¾“å‡º: Canis gold
```

- `change_species` æ˜¯ **ç±»æ–¹æ³•**ï¼Œå®ƒ **ä¿®æ”¹çš„æ˜¯ç±»å±æ€§ `species`ï¼Œå½±å“æ‰€æœ‰å®ä¾‹**ã€‚
- **å¯ä»¥ç”¨ç±»åè°ƒç”¨**ï¼ˆæ¨èï¼‰ï¼Œä¹Ÿå¯ä»¥ç”¨å®ä¾‹è°ƒç”¨ï¼ˆä½†ä¸€èˆ¬ä¸è¿™æ ·åšï¼‰ã€‚

------

### **2. ç±»æ–¹æ³• vs. å®ä¾‹æ–¹æ³• vs. é™æ€æ–¹æ³•**

| æ–¹æ³•ç±»å‹     | ç¬¬ä¸€ä¸ªå‚æ•° | è®¿é—®å®ä¾‹å±æ€§ | è®¿é—®ç±»å±æ€§    | é€šè¿‡å®ä¾‹è°ƒç”¨ | é€šè¿‡ç±»è°ƒç”¨ |
| ------------ | ---------- | ------------ | ------------- | ------------ | ---------- |
| **å®ä¾‹æ–¹æ³•** | `self`     | âœ…            | âœ…ï¼ˆä½†ä¸æ¨èï¼‰ | âœ…            | âŒ          |
| **ç±»æ–¹æ³•**   | `cls`      | âŒ            | âœ…             | âœ…            | âœ…          |
| **é™æ€æ–¹æ³•** | æ—          | âŒ            | âŒ             | âœ…            | âœ…          |

ç¤ºä¾‹ï¼š

```python
class Example:
    class_attr = "I am a class attribute"

    def instance_method(self):
        print("Instance method:", self.class_attr)

    @classmethod
    def class_method(cls):
        print("Class method:", cls.class_attr)

    @staticmethod
    def static_method():
        print("Static method: No access to class or instance attributes")

# ç›´æ¥è°ƒç”¨
Example.class_method()  # âœ… Class method: I am a class attribute
Example.static_method() # âœ… Static method: No access to class or instance attributes

# é€šè¿‡å®ä¾‹è°ƒç”¨
e = Example()
e.class_method()  # âœ… Class method: I am a class attribute
e.static_method() # âœ… Static method: No access to class or instance attributes
```

- **ç±»æ–¹æ³• (`@classmethod`)** è®¿é—®å’Œä¿®æ”¹ç±»å±æ€§ï¼Œä½†ä¸èƒ½è®¿é—®å®ä¾‹å±æ€§ã€‚
- **é™æ€æ–¹æ³• (`@staticmethod`)** ä¸èƒ½è®¿é—®ç±»å±æ€§æˆ–å®ä¾‹å±æ€§ï¼Œåªæ˜¯æ™®é€šå‡½æ•°æ”¾åœ¨ç±»é‡Œã€‚

------

### **3. ä»€ä¹ˆæ—¶å€™ç”¨ç±»æ–¹æ³•ï¼Ÿ**

#### **âœ… ç”¨äºä¿®æ”¹ç±»å±æ€§**

```python
class Car:
    total_cars = 0  # å…±äº«çš„ç±»å±æ€§

    def __init__(self, brand):
        self.brand = brand
        Car.total_cars += 1  # ä¿®æ”¹ç±»å±æ€§

    @classmethod
    def set_total_cars(cls, count):
        cls.total_cars = count  # ä¿®æ”¹ç±»å±æ€§

# ä¿®æ”¹ç±»å±æ€§
Car.set_total_cars(100)
print(Car.total_cars)  # è¾“å‡º: 100
```

- `set_total_cars` ç›´æ¥ä¿®æ”¹ `total_cars`ï¼Œå½±å“æ‰€æœ‰å®ä¾‹ã€‚

------

#### **âœ… ç”¨äºåˆ›å»ºä¸åŒçš„å®ä¾‹**

å¯ä»¥ä½¿ç”¨ `@classmethod` ä½œä¸º **å·¥å‚æ–¹æ³•** åˆ›å»ºå®ä¾‹ï¼š

```python
class Person:
    def __init__(self, name, age):
        self.name = name
        self.age = age

    @classmethod
    def from_string(cls, data_str):
        name, age = data_str.split("-")
        return cls(name, int(age))  # åˆ›å»ºæ–°å®ä¾‹

# ç”¨ç±»æ–¹æ³•åˆ›å»ºå®ä¾‹
p = Person.from_string("Alice-25")
print(p.name, p.age)  # è¾“å‡º: Alice 25
```

- **`from_string` ä½œä¸ºå·¥å‚æ–¹æ³•**ï¼Œå¯ä»¥ç”¨ `"Alice-25"` è¿™æ ·çš„å­—ç¬¦ä¸²åˆ›å»º `Person` å®ä¾‹ã€‚

------

### **4. ç»“è®º**

âœ… **ç±»æ–¹æ³• (`@classmethod`)ï¼š**

- ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ `cls`ï¼Œä»£è¡¨ç±»æœ¬èº«ã€‚
- **è®¿é—®å’Œä¿®æ”¹ç±»å±æ€§ï¼Œè€Œä¸æ˜¯å®ä¾‹å±æ€§**ã€‚
- **æ¨èç”¨ç±»è°ƒç”¨ï¼Œè€Œä¸æ˜¯å®ä¾‹è°ƒç”¨**ã€‚
- é€‚ç”¨äºï¼š
  1. **ä¿®æ”¹ç±»å±æ€§**ï¼ˆå¦‚ `set_total_cars`ï¼‰ã€‚
  2. **å·¥å‚æ–¹æ³•**ï¼ˆå¦‚ `from_string`ï¼‰ã€‚







## é™æ€æ–¹æ³•

**é™æ€æ–¹æ³•ï¼ˆ`@staticmethod`ï¼‰** æ˜¯ç±»ä¸­çš„æ–¹æ³•ï¼Œä½†**å®ƒæ—¢ä¸è®¿é—®å®ä¾‹å±æ€§ï¼Œä¹Ÿä¸è®¿é—®ç±»å±æ€§**ï¼Œæ›´åƒæ˜¯æ”¾åœ¨ç±»ä¸­çš„æ™®é€šå‡½æ•°ã€‚

------

### **1. å®šä¹‰å’Œä½¿ç”¨é™æ€æ–¹æ³•**

**ä½¿ç”¨ `@staticmethod` è£…é¥°å™¨å®šä¹‰é™æ€æ–¹æ³•**ï¼š

```python
class MathUtils:
    @staticmethod
    def add(x, y):
        return x + y

    @staticmethod
    def multiply(x, y):
        return x * y

# é€šè¿‡ç±»è°ƒç”¨
print(MathUtils.add(3, 5))  # è¾“å‡º: 8
print(MathUtils.multiply(4, 6))  # è¾“å‡º: 24

# é€šè¿‡å®ä¾‹è°ƒç”¨ï¼ˆä¸æ¨èï¼Œä½†å¯ä»¥ï¼‰
math_obj = MathUtils()
print(math_obj.add(2, 7))  # è¾“å‡º: 9
```

- `add` å’Œ `multiply` **ä¸è®¿é—®å®ä¾‹å±æ€§æˆ–ç±»å±æ€§**ï¼Œåªæ˜¯å·¥å…·å‡½æ•°ï¼Œæ‰€ä»¥ç”¨ `@staticmethod` å®šä¹‰ã€‚
- **é™æ€æ–¹æ³•æ—¢å¯ä»¥ç”¨ç±»åè°ƒç”¨ï¼Œä¹Ÿå¯ä»¥ç”¨å®ä¾‹è°ƒç”¨**ï¼ˆä½†æ¨èç”¨ç±»åï¼‰ã€‚

------

### **3. ä»€ä¹ˆæ—¶å€™ç”¨é™æ€æ–¹æ³•ï¼Ÿ**

#### âœ… **1. ä½œä¸ºå·¥å…·å‡½æ•°ï¼ˆä¸ä¾èµ–ç±»å’Œå®ä¾‹ï¼‰**

```python
class MathUtils:
    @staticmethod
    def is_even(n):
        return n % 2 == 0

# ç›´æ¥è°ƒç”¨
print(MathUtils.is_even(10))  # è¾“å‡º: True
print(MathUtils.is_even(15))  # è¾“å‡º: False
```

- `is_even` åªæ˜¯ä¸ªæ•°å­¦è¿ç®—ï¼Œ**ä¸éœ€è¦å®ä¾‹æˆ–ç±»å±æ€§**ï¼Œé€‚åˆç”¨é™æ€æ–¹æ³•ã€‚

------

#### âœ… **2. é€»è¾‘åˆ†ç¦»ï¼Œè®©ç±»æ›´æ¸…æ™°**

```python
class TemperatureConverter:
    @staticmethod
    def celsius_to_fahrenheit(celsius):
        return celsius * 9/5 + 32

    @staticmethod
    def fahrenheit_to_celsius(fahrenheit):
        return (fahrenheit - 32) * 5/9

print(TemperatureConverter.celsius_to_fahrenheit(30))  # è¾“å‡º: 86.0
print(TemperatureConverter.fahrenheit_to_celsius(98))  # è¾“å‡º: 36.666...
```

- **é™æ€æ–¹æ³•æŠŠæ¸©åº¦è½¬æ¢é€»è¾‘å°è£…åˆ°ç±»ä¸­**ï¼Œè€Œä¸éœ€è¦ `self` æˆ– `cls`ã€‚

------

#### âœ… **3. é™åˆ¶å®ä¾‹æ–¹æ³•çš„è®¿é—®**

```python
class Security:
    @staticmethod
    def hash_password(password):
        return "hashed_" + password  # ç®€å•æ¨¡æ‹ŸåŠ å¯†

    def __init__(self, password):
        self.password = Security.hash_password(password)  # é€šè¿‡é™æ€æ–¹æ³•å¤„ç†

# åˆ›å»ºç”¨æˆ·
user = Security("mypassword")
print(user.password)  # è¾“å‡º: hashed_mypassword
```

- `hash_password` ä½œä¸ºé™æ€æ–¹æ³•ï¼Œä¸æš´éœ²åœ¨å®ä¾‹ä¸­ï¼Œ**ç¡®ä¿å®‰å…¨æ€§**ã€‚

------

### **4. ç»“è®º**

âœ… **é™æ€æ–¹æ³•ï¼ˆ`@staticmethod`ï¼‰ï¼š**

- **æ²¡æœ‰ `self` æˆ– `cls`**ï¼Œä¸è®¿é—®å®ä¾‹å±æ€§æˆ–ç±»å±æ€§ã€‚
- **å¯ä»¥ç”¨ç±»åè°ƒç”¨ï¼ˆæ¨èï¼‰æˆ–å®ä¾‹è°ƒç”¨**ã€‚
- é€‚ç”¨äºï¼š
  1. **å·¥å…·å‡½æ•°**ï¼ˆå¦‚ `is_even`ï¼‰ã€‚
  2. **é€»è¾‘åˆ†ç¦»**ï¼ˆå¦‚ `TemperatureConverter`ï¼‰ã€‚
  3. **è¾…åŠ©ç±»æ–¹æ³•æˆ–å®ä¾‹æ–¹æ³•**ï¼ˆå¦‚ `hash_password`ï¼‰ã€‚





### é™æ€æ–¹æ³• vs. å®ä¾‹æ–¹æ³• vs. ç±»æ–¹æ³•**

| æ–¹æ³•ç±»å‹     | ç¬¬ä¸€ä¸ªå‚æ•° | è®¿é—®å®ä¾‹å±æ€§ | è®¿é—®ç±»å±æ€§    | é€šè¿‡å®ä¾‹è°ƒç”¨ | é€šè¿‡ç±»è°ƒç”¨ |
| ------------ | ---------- | ------------ | ------------- | ------------ | ---------- |
| **å®ä¾‹æ–¹æ³•** | `self`     | âœ…            | âœ…ï¼ˆä½†ä¸æ¨èï¼‰ | âœ…            | âŒ          |
| **ç±»æ–¹æ³•**   | `cls`      | âŒ            | âœ…             | âœ…            | âœ…          |
| **é™æ€æ–¹æ³•** | æ—          | âŒ            | âŒ             | âœ…            | âœ…          |

ç¤ºä¾‹ï¼š

```python
class Example:
    class_attr = "I am a class attribute"

    def instance_method(self):
        print("Instance method:", self.class_attr)

    @classmethod
    def class_method(cls):
        print("Class method:", cls.class_attr)

    @staticmethod
    def static_method():
        print("Static method: No access to class or instance attributes")

# ç›´æ¥è°ƒç”¨
Example.class_method()  # âœ… Class method: I am a class attribute
Example.static_method() # âœ… Static method: No access to class or instance attributes

# é€šè¿‡å®ä¾‹è°ƒç”¨
e = Example()
e.class_method()  # âœ… Class method: I am a class attribute
e.static_method() # âœ… Static method: No access to class or instance attributes
```

- **å®ä¾‹æ–¹æ³• (`self`)** è®¿é—®å®ä¾‹å±æ€§ã€‚
- **ç±»æ–¹æ³• (`@classmethod`)** è®¿é—®ç±»å±æ€§ã€‚
- **é™æ€æ–¹æ³• (`@staticmethod`)** **ä¸èƒ½è®¿é—®å®ä¾‹å’Œç±»å±æ€§**ï¼Œåªæ˜¯æ™®é€šå‡½æ•°æ”¾åœ¨ç±»é‡Œã€‚



## ç±»çš„ç»§æ‰¿

ç»§æ‰¿æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œå®ƒå…è®¸æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°ç±»ï¼ˆå­ç±»/æ´¾ç”Ÿç±»ï¼‰ï¼Œè¿™ä¸ªæ–°ç±»å¯ä»¥ç»§æ‰¿ä¸€ä¸ªæˆ–å¤šä¸ªç°æœ‰ç±»ï¼ˆçˆ¶ç±»/åŸºç±»/è¶…ç±»ï¼‰çš„å±æ€§ï¼ˆAttributesï¼‰å’Œæ–¹æ³•ï¼ˆMethodsï¼‰ã€‚

### **ä¸ºä»€ä¹ˆä½¿ç”¨ç»§æ‰¿ï¼Ÿ**

1. **ä»£ç é‡ç”¨ï¼ˆCode Reusabilityï¼‰**ï¼šå­ç±»å¯ä»¥ç›´æ¥ä½¿ç”¨çˆ¶ç±»ä¸­å·²ç»å®šä¹‰å¥½çš„å±æ€§å’Œæ–¹æ³•ï¼Œæ— éœ€é‡å¤ç¼–å†™ç›¸åŒçš„ä»£ç ã€‚
2. **å¯æ‰©å±•æ€§ï¼ˆExtensibilityï¼‰**ï¼šå­ç±»å¯ä»¥åœ¨ç»§æ‰¿çˆ¶ç±»åŠŸèƒ½çš„åŸºç¡€ä¸Šï¼Œæ·»åŠ è‡ªå·±ç‰¹æœ‰çš„æ–°åŠŸèƒ½æˆ–ä¿®æ”¹ï¼ˆé‡å†™ï¼‰çˆ¶ç±»çš„åŠŸèƒ½ï¼Œä½¿å¾—ä»£ç æ›´æ˜“äºæ‰©å±•ã€‚
3. **é€»è¾‘å±‚æ¬¡ï¼ˆLogical Hierarchyï¼‰**ï¼šç»§æ‰¿å¯ä»¥å¾ˆå¥½åœ°æ¨¡æ‹Ÿç°å®ä¸–ç•Œä¸­çš„ "is-a" ï¼ˆæ˜¯ä¸€ä¸ªï¼‰å…³ç³»ï¼Œæ„å»ºæ¸…æ™°çš„ç±»å±‚æ¬¡ç»“æ„ï¼ˆä¾‹å¦‚ï¼š`Dog` is an `Animal`ï¼Œ`Car` is a `Vehicle`ï¼‰ã€‚
4. **å¤šæ€ï¼ˆPolymorphismï¼‰**ï¼šè™½ç„¶ä¸æ˜¯ç»§æ‰¿æœ¬èº«ï¼Œä½†ç»§æ‰¿æ˜¯å®ç°å¤šæ€çš„åŸºç¡€ã€‚ä¸åŒå­ç±»çš„å¯¹è±¡å¯ä»¥å“åº”ç›¸åŒçš„æ–¹æ³•è°ƒç”¨ï¼Œä½†è¡¨ç°å‡ºä¸åŒçš„è¡Œä¸ºã€‚

### **åŸºæœ¬è¯­æ³•**

åœ¨ Python ä¸­ï¼Œå®šä¹‰ä¸€ä¸ªç»§æ‰¿è‡ªå…¶ä»–ç±»çš„å­ç±»ï¼Œè¯­æ³•éå¸¸ç®€å•ï¼š

```Python
class ParentClass:
    # çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•
    pass

class ChildClass(ParentClass): # å°†çˆ¶ç±»åå†™åœ¨æ‹¬å·é‡Œ
    # å­ç±»å¯ä»¥æ·»åŠ æ–°çš„å±æ€§å’Œæ–¹æ³•ï¼Œæˆ–è€…é‡å†™çˆ¶ç±»çš„æ–¹æ³•
    pass
```

### **ç®€å•ç¤ºä¾‹**

```Python
# å®šä¹‰çˆ¶ç±» Animal
class Animal:
    def __init__(self, name):
        self.name = name
        print(f"åˆ›å»ºäº†ä¸€ä¸ªåŠ¨ç‰©ï¼Œåå­—æ˜¯ {self.name}")

    def speak(self):
        # è¿™ä¸ªæ–¹æ³•åœ¨çˆ¶ç±»ä¸­å¯èƒ½æ²¡æœ‰å…·ä½“å®ç°ï¼Œæˆ–è€…æä¾›ä¸€ä¸ªé€šç”¨çš„å®ç°
        raise NotImplementedError("å­ç±»å¿…é¡»å®ç°è¿™ä¸ªæ–¹æ³•")

    def move(self):
        print(f"{self.name} ç§»åŠ¨äº†ã€‚")

# å®šä¹‰å­ç±» Dogï¼Œç»§æ‰¿è‡ª Animal
class Dog(Animal):
    def speak(self): # é‡å†™ (Override) çˆ¶ç±»çš„ speak æ–¹æ³•
        return f"{self.name} è¯´ï¼šæ±ªæ±ªï¼"

# å®šä¹‰å­ç±» Catï¼Œç»§æ‰¿è‡ª Animal
class Cat(Animal):
    def speak(self): # é‡å†™ (Override) çˆ¶ç±»çš„ speak æ–¹æ³•
        return f"{self.name} è¯´ï¼šå–µå–µ~"

    def purr(self): # å­ç±»æ·»åŠ è‡ªå·±çš„æ–¹æ³•
        print(f"{self.name} å‘å‡ºäº†å‘¼å™œå£°ã€‚")

# --- ä½¿ç”¨ ---
my_dog = Dog("æ—ºè´¢")
my_cat = Cat("å’ªå’ª")

my_dog.move()      # è°ƒç”¨ç»§æ‰¿è‡ª Animal çš„ move æ–¹æ³•
print(my_dog.speak())  # è°ƒç”¨ Dog é‡å†™çš„ speak æ–¹æ³•

my_cat.move()      # è°ƒç”¨ç»§æ‰¿è‡ª Animal çš„ move æ–¹æ³•
print(my_cat.speak())  # è°ƒç”¨ Cat é‡å†™çš„ speak æ–¹æ³•
my_cat.purr()      # è°ƒç”¨ Cat è‡ªå·±å®šä¹‰çš„ purr æ–¹æ³•

# å°è¯•è°ƒç”¨ Animal çš„ speak æ–¹æ³•ä¼šæŠ¥é”™ï¼ˆå› ä¸ºæˆ‘ä»¬ç”¨äº† raise NotImplementedErrorï¼‰
# generic_animal = Animal("æœªçŸ¥ç”Ÿç‰©")
# generic_animal.speak() # ä¼šå¼•å‘ NotImplementedError
```

### **å…³é”®æ¦‚å¿µ**

1. **æ–¹æ³•é‡å†™ï¼ˆMethod Overridingï¼‰**ï¼š

   - å¦‚æœå­ç±»å®šä¹‰äº†ä¸€ä¸ªä¸çˆ¶ç±»åŒåçš„æ–¹æ³•ï¼Œé‚£ä¹ˆå­ç±»çš„è¿™ä¸ªæ–¹æ³•å°±ä¼šè¦†ç›–æ‰çˆ¶ç±»çš„åŒåæ–¹æ³•ã€‚å½“é€šè¿‡å­ç±»å®ä¾‹è°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œæ‰§è¡Œçš„æ˜¯å­ç±»ä¸­çš„ç‰ˆæœ¬ã€‚
   - åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ`Dog` å’Œ `Cat` éƒ½é‡å†™äº† `Animal` çš„ `speak` æ–¹æ³•ã€‚

2. **`super()` å‡½æ•°**ï¼š

   - æœ‰æ—¶ï¼Œåœ¨å­ç±»ä¸­é‡å†™æ–¹æ³•æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½è¿˜æƒ³è°ƒç”¨çˆ¶ç±»ä¸­è¢«è¦†ç›–çš„é‚£ä¸ªç‰ˆæœ¬çš„åŠŸèƒ½ï¼Œè€Œä¸æ˜¯å®Œå…¨æ›¿ä»£å®ƒã€‚è¿™æ—¶å°±å¯ä»¥ä½¿ç”¨ `super()` å‡½æ•°ã€‚
   - `super()` è¿”å›ä¸€ä¸ªä¸´æ—¶çš„çˆ¶ç±»å¯¹è±¡ï¼Œå…è®¸ä½ è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ã€‚
   - æœ€å¸¸è§çš„ç”¨é€”æ˜¯åœ¨å­ç±»çš„ `__init__` æ–¹æ³•ä¸­è°ƒç”¨çˆ¶ç±»çš„ `__init__` æ–¹æ³•ï¼Œä»¥ç¡®ä¿çˆ¶ç±»çš„åˆå§‹åŒ–é€»è¾‘ä¹Ÿå¾—åˆ°æ‰§è¡Œã€‚

   ```Python
   class Parent:
       def __init__(self, name):
           print("çˆ¶ç±» Parent çš„ __init__ è¢«è°ƒç”¨")
           self.name = name
   
       def greet(self):
           print(f"æ¥è‡ª Parent çš„é—®å€™ï¼š{self.name}")
   
   class Child(Parent):
       def __init__(self, name, age):
           print("å­ç±» Child çš„ __init__ è¢«è°ƒç”¨")
           # ä½¿ç”¨ super() è°ƒç”¨çˆ¶ç±»çš„ __init__ æ–¹æ³•
           super().__init__(name)
           # æ·»åŠ å­ç±»è‡ªå·±çš„åˆå§‹åŒ–é€»è¾‘
           self.age = age
           print(f"å­ç±» Child å®Œæˆåˆå§‹åŒ–ï¼Œå¹´é¾„ä¸º {self.age}")
   
       def greet(self): # é‡å†™ greet æ–¹æ³•
           print(f"æ¥è‡ª Child çš„é—®å€™å¼€å§‹...")
           # ä½¿ç”¨ super() è°ƒç”¨çˆ¶ç±»çš„ greet æ–¹æ³•
           super().greet()
           print(f"...Child çš„é—®å€™ç»“æŸï¼Œå¹´é¾„ï¼š{self.age}")
   
   # --- ä½¿ç”¨ ---
   c = Child("å°æ˜", 10)
   print(c.name) # 'å°æ˜' (ç»§æ‰¿è‡ªçˆ¶ç±»å¹¶ç”± super().__init__ åˆå§‹åŒ–)
   print(c.age)  # 10 (å­ç±»è‡ªå·±åˆå§‹åŒ–)
   c.greet()
   ```

   **æ³¨æ„ï¼š** å¦‚æœå­ç±»å®šä¹‰äº†è‡ªå·±çš„ `__init__` æ–¹æ³•ï¼Œè€Œæ²¡æœ‰æ˜¾å¼è°ƒç”¨ `super().__init__(...)`ï¼Œé‚£ä¹ˆçˆ¶ç±»çš„ `__init__` æ–¹æ³• **ä¸ä¼š** è¢«è‡ªåŠ¨æ‰§è¡Œã€‚

3. **å¤šé‡ç»§æ‰¿ï¼ˆMultiple Inheritanceï¼‰**ï¼š

   - Python å…è®¸ä¸€ä¸ªå­ç±»ç»§æ‰¿è‡ªå¤šä¸ªçˆ¶ç±»ã€‚
   - è¯­æ³•ï¼š`class Subclass(Base1, Base2, Base3, ...):`
   - å½“å¤šä¸ªçˆ¶ç±»ä¸­æœ‰åŒåæ–¹æ³•æ—¶ï¼ŒPython ä¼šæŒ‰ç…§ç‰¹å®šçš„é¡ºåºï¼ˆç§°ä¸º **MRO - Method Resolution Orderï¼Œæ–¹æ³•è§£æé¡ºåº**ï¼‰æ¥æŸ¥æ‰¾å¹¶è°ƒç”¨æ–¹æ³•ã€‚é€šå¸¸æ˜¯ä»å·¦åˆ°å³ï¼Œæ·±åº¦ä¼˜å…ˆçš„åŸåˆ™ã€‚å¯ä»¥ä½¿ç”¨ `ClassName.mro()` æˆ– `ClassName.__mro__` æŸ¥çœ‹ä¸€ä¸ªç±»çš„ MROã€‚
   - å¤šé‡ç»§æ‰¿è™½ç„¶å¼ºå¤§ï¼Œä½†ä¹Ÿå¯èƒ½å¼•å…¥å¤æ‚æ€§ï¼ˆä¾‹å¦‚è‘—åçš„â€œè±å½¢é—®é¢˜â€ Diamond Problemï¼‰ï¼Œéœ€è¦è°¨æ…ä½¿ç”¨ã€‚

   

   ```Python
   class A:
       def ping(self):
           print("Ping from A")
   
   class B:
       def ping(self):
           print("Ping from B")
       def pong(self):
           print("Pong from B")
   
   class C(A, B): # ç»§æ‰¿è‡ª A å’Œ B
       pass
   
   class D(B, A): # ç»§æ‰¿è‡ª B å’Œ A
       pass
   
   # --- ä½¿ç”¨ ---
   c_instance = C()
   c_instance.ping() # è¾“å‡º: Ping from A (å› ä¸º A åœ¨ B å‰é¢)
   c_instance.pong() # è¾“å‡º: Pong from B
   
   d_instance = D()
   d_instance.ping() # è¾“å‡º: Ping from B (å› ä¸º B åœ¨ A å‰é¢)
   
   print(C.mro()) # æŸ¥çœ‹ C çš„æ–¹æ³•è§£æé¡ºåº
   # è¾“å‡ºç±»ä¼¼: [<class '__main__.C'>, <class '__main__.A'>, <class '__main__.B'>, <class 'object'>]
   
   print(D.mro()) # æŸ¥çœ‹ D çš„æ–¹æ³•è§£æé¡ºåº
   # è¾“å‡ºç±»ä¼¼: [<class '__main__.D'>, <class '__main__.B'>, <class '__main__.A'>, <class 'object'>]
   ```

   **æ³¨æ„ï¼š** æ‰€æœ‰ Python ç±»ï¼ˆåœ¨æ–°å¼ç±»æ¨¡å‹ä¸­ï¼Œå³ Python 3.x é»˜è®¤ï¼‰æœ€ç»ˆéƒ½éšå¼åœ°ç»§æ‰¿è‡ª `object` åŸºç±»ã€‚

### **æ€»ç»“**

ç»§æ‰¿æ˜¯ Python OOP çš„å¼ºå¤§ç‰¹æ€§ï¼Œå®ƒé€šè¿‡å…è®¸å­ç±»è·å–çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•ï¼Œä¿ƒè¿›äº†ä»£ç é‡ç”¨å’Œç»“æ„åŒ–ã€‚é€šè¿‡æ–¹æ³•é‡å†™å’Œ `super()` å‡½æ•°ï¼Œå­ç±»å¯ä»¥å®šåˆ¶æˆ–æ‰©å±•ç»§æ‰¿æ¥çš„åŠŸèƒ½ã€‚ç†è§£ç»§æ‰¿ã€é‡å†™å’Œ `super()` çš„ç”¨æ³•å¯¹äºç¼–å†™ç»“æ„è‰¯å¥½ã€å¯ç»´æŠ¤çš„é¢å‘å¯¹è±¡ Python ä»£ç è‡³å…³é‡è¦ã€‚åŒæ—¶ï¼Œä¹Ÿè¦äº†è§£å¤šé‡ç»§æ‰¿åŠå…¶æ½œåœ¨çš„å¤æ‚æ€§ã€‚



## å¤šæ€

å¤šæ€æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„åˆä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œå®ƒæºäºå¸Œè…Šè¯­ï¼Œæ„ä¸ºâ€œå¤šç§å½¢æ€â€ã€‚åœ¨ç¼–ç¨‹ä¸­ï¼Œå¤šæ€æŒ‡çš„æ˜¯ **ä¸åŒçš„å¯¹è±¡èƒ½å¤Ÿå“åº”ç›¸åŒçš„æ¶ˆæ¯ï¼ˆå³æ–¹æ³•è°ƒç”¨ï¼‰ï¼Œä½†è¡¨ç°å‡ºä¸åŒçš„è¡Œä¸ºæˆ–å½¢æ€**ã€‚

> ç®€å•æ¥è¯´ï¼Œå¤šæ€å…è®¸æˆ‘ä»¬ä»¥ä¸€ç§ç»Ÿä¸€çš„æ–¹å¼æ¥å¤„ç†**ä¸åŒç±»å‹çš„å¯¹è±¡**ï¼Œåªè¦å®ƒä»¬å…±äº«ä¸€ä¸ªå…±åŒçš„æ¥å£ï¼ˆå³å…·æœ‰**ç›¸åŒåç§°çš„æ–¹æ³•**ï¼‰ã€‚

### **ä¸ºä»€ä¹ˆä½¿ç”¨å¤šæ€ï¼Ÿ**

1. **çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ï¼ˆFlexibility and Extensibilityï¼‰**ï¼šä½ å¯ä»¥ç¼–å†™ä¸€æ®µé€šç”¨çš„ä»£ç æ¥å¤„ç†æ»¡è¶³ç‰¹å®šæ¥å£ï¼ˆæœ‰æŸä¸ªæ–¹æ³•ï¼‰çš„å¯¹è±¡ï¼Œè€Œæ— éœ€å…³å¿ƒè¿™äº›å¯¹è±¡çš„å…·ä½“ç±»å‹ã€‚å½“ä½ éœ€è¦æ·»åŠ æ–°çš„ã€ç¬¦åˆè¯¥æ¥å£çš„ç±»æ—¶ï¼Œç°æœ‰ä»£ç æ— éœ€ä¿®æ”¹å°±èƒ½ä¸ä¹‹åä½œã€‚
2. **ç®€åŒ–ä»£ç ï¼ˆSimplicityï¼‰**ï¼šé¿å…äº†å¤§é‡åŸºäºå¯¹è±¡ç±»å‹çš„ `if/elif/else` åˆ¤æ–­ã€‚ä½ åªéœ€è°ƒç”¨é‚£ä¸ªå…±åŒçš„æ–¹æ³•ï¼Œå…·ä½“çš„æ‰§è¡Œé€»è¾‘ç”±å¯¹è±¡è‡ªèº«å†³å®šã€‚
3. **æé«˜å¯è¯»æ€§ï¼ˆReadabilityï¼‰**ï¼šä»£ç æ›´å…³æ³¨å¯¹è±¡çš„â€œèƒ½åŠ›â€ï¼ˆèƒ½è°ƒç”¨ä»€ä¹ˆæ–¹æ³•ï¼‰ï¼Œè€Œä¸æ˜¯å®ƒçš„â€œèº«ä»½â€ï¼ˆå…·ä½“æ˜¯ä»€ä¹ˆç±»ï¼‰ã€‚

### **Python ä¸­çš„å¤šæ€ï¼šé¸­å­ç±»å‹ï¼ˆDuck Typingï¼‰**

Python å®ç°å¤šæ€çš„æ–¹å¼éå¸¸å…·æœ‰ç‰¹è‰²ï¼Œä¸»è¦ä¾èµ–äºæ‰€è°“çš„ **é¸­å­ç±»å‹ï¼ˆDuck Typingï¼‰** å“²å­¦ã€‚

> â€œIf it walks like a duck and quacks like a duck, then it must be a duck.â€
>
> ï¼ˆå¦‚æœå®ƒèµ°èµ·æ¥åƒé¸­å­ï¼Œå«èµ·æ¥ä¹Ÿåƒé¸­å­ï¼Œé‚£å®ƒå°±æ˜¯åªé¸­å­ã€‚ï¼‰

è¿™æ„å‘³ç€ Python **ä¸å…³å¿ƒå¯¹è±¡çš„å…·ä½“ç±»å‹æ˜¯ä»€ä¹ˆ**ï¼Œè€Œæ˜¯å…³å¿ƒå®ƒ **æ˜¯å¦å…·æœ‰ä½ è¯•å›¾è°ƒç”¨çš„æ–¹æ³•æˆ–å±æ€§**ã€‚åªè¦å¯¹è±¡æœ‰é‚£ä¸ªæ–¹æ³•ï¼Œä½ å°±å¯ä»¥è°ƒç”¨å®ƒã€‚

- **ä¸å¼ºåˆ¶è¦æ±‚ç»§æ‰¿**ï¼šä¸å…¶ä»–ä¸€äº›è¯­è¨€ï¼ˆå¦‚ Javaã€C++ï¼‰ä¸åŒï¼ŒPython çš„å¤šæ€ä¸ä¸€å®šéœ€è¦é€šè¿‡ç»§æ‰¿æ¥å»ºç«‹ã€‚ä¸¤ä¸ªå®Œå…¨ä¸ç›¸å…³çš„ç±»ï¼Œåªè¦å®ƒä»¬æœ‰åŒåçš„æ–¹æ³•ï¼Œå°±å¯ä»¥åœ¨æœŸæœ›è¯¥æ–¹æ³•çš„ä¸Šä¸‹æ–‡ä¸­è¢«å¤šæ€åœ°ä½¿ç”¨ã€‚
- **å…³æ³¨æ¥å£è€Œéç±»å‹**ï¼šå¤šæ€çš„æ ¸å¿ƒåœ¨äºå¯¹è±¡æ˜¯å¦å®ç°äº†é¢„æœŸçš„â€œæ¥å£â€ï¼ˆå³æ–¹æ³•é›†åˆï¼‰ï¼Œè€Œä¸æ˜¯å®ƒæ˜¯å¦å±äºæŸä¸ªç‰¹å®šçš„ç±»æˆ–ç»§æ‰¿è‡ªæŸä¸ªç‰¹å®šçš„åŸºç±»ã€‚

### **ç¤ºä¾‹**

```Python
# å®šä¹‰å‡ ä¸ªæœ‰ 'speak' æ–¹æ³•çš„ç±»ï¼Œå®ƒä»¬ä¹‹é—´æ²¡æœ‰ç»§æ‰¿å…³ç³»
class Dog:
    def speak(self):
        return "æ±ªæ±ªï¼"

class Cat:
    def speak(self):
        return "å–µå–µ~"

class Duck:
    def speak(self):
        return "å˜å˜ï¼"

# ä¸€ä¸ªâ€œå¤–æ˜Ÿç”Ÿç‰©â€ç±»ï¼Œä¹Ÿæœ‰ speak æ–¹æ³•
class Alien:
    def make_noise(self): # æ³¨æ„ï¼šæ–¹æ³•åä¸åŒ
        return "æ»‹æ»‹æ»‹..."
    def speak(self):
        return "ä½ å¥½ï¼Œåœ°çƒäººï¼"

# å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—ä»»ä½•æœ‰ 'speak' æ–¹æ³•çš„å¯¹è±¡
def make_it_speak(entity):
    # è¿™é‡Œä¸å…³å¿ƒ entity æ˜¯ Dog, Cat, Duck è¿˜æ˜¯ Alien
    # åªè¦å®ƒæœ‰ speak() æ–¹æ³•ï¼Œå°±èƒ½è°ƒç”¨
    try:
        print(entity.speak())
    except AttributeError:
        print(f"è¿™ä¸ªå¯¹è±¡æ²¡æœ‰ 'speak' æ–¹æ³•ï¼")

# --- ä½¿ç”¨ ---
my_dog = Dog()
my_cat = Cat()
my_duck = Duck()
my_alien = Alien()

print("--- è®©å®ƒä»¬è¯´è¯ ---")
make_it_speak(my_dog)    # è¾“å‡º: æ±ªæ±ªï¼
make_it_speak(my_cat)    # è¾“å‡º: å–µå–µ~
make_it_speak(my_duck)   # è¾“å‡º: å˜å˜ï¼
make_it_speak(my_alien)  # è¾“å‡º: ä½ å¥½ï¼Œåœ°çƒäººï¼

# å°è¯•ä¼ é€’ä¸€ä¸ªæ²¡æœ‰ speak æ–¹æ³•çš„å¯¹è±¡
class Car:
    def drive(self):
        print("æ±½è½¦è¡Œé©¶ä¸­...")

my_car = Car()
make_it_speak(my_car)    # è¾“å‡º: è¿™ä¸ªå¯¹è±¡æ²¡æœ‰ 'speak' æ–¹æ³•ï¼
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š

1. `Dog`, `Cat`, `Duck`, `Alien` ç±»éƒ½æœ‰ä¸€ä¸ªåä¸º `speak` çš„æ–¹æ³•ã€‚
2. `make_it_speak` å‡½æ•°æ¥å—ä¸€ä¸ªå‚æ•° `entity`ã€‚å®ƒå¹¶ä¸æ£€æŸ¥ `entity` æ˜¯ä»€ä¹ˆç±»å‹ï¼Œåªæ˜¯å°è¯•è°ƒç”¨ `entity.speak()`ã€‚
3. åªè¦ä¼ é€’ç»™ `make_it_speak` çš„å¯¹è±¡ï¼ˆæ— è®ºå…¶ç±»å‹ï¼‰æœ‰ä¸€ä¸ª `speak` æ–¹æ³•ï¼Œè¿™ä¸ªå‡½æ•°å°±èƒ½æ­£å¸¸å·¥ä½œï¼Œå¹¶ä¸”æ¯ä¸ªå¯¹è±¡ä¼šæ‰§è¡Œè‡ªå·±ç‰ˆæœ¬çš„ `speak` æ–¹æ³•ï¼Œè¿™å°±æ˜¯å¤šæ€ã€‚
4. å¦‚æœä¼ é€’çš„å¯¹è±¡ï¼ˆå¦‚ `my_car`ï¼‰æ²¡æœ‰ `speak` æ–¹æ³•ï¼ŒPython ä¼šåœ¨è¿è¡Œæ—¶å¼•å‘ `AttributeError`ï¼ˆæˆ‘ä»¬ç”¨ `try...except` æ•è·äº†å®ƒï¼‰ã€‚

### **å¤šæ€ä¸ç»§æ‰¿çš„å…³ç³»**

è™½ç„¶ Python çš„é¸­å­ç±»å‹ä½¿å¾—ç»§æ‰¿ä¸æ˜¯å®ç°å¤šæ€çš„*å¿…è¦*æ¡ä»¶ï¼Œä½†ç»§æ‰¿æ˜¯**åˆ›å»ºå’Œç»„ç»‡**æ”¯æŒå¤šæ€çš„ç±»çš„ä¸€ç§éå¸¸**å¸¸è§å’Œè‡ªç„¶**çš„æ–¹å¼ã€‚

é€šè¿‡å®šä¹‰ä¸€ä¸ªåŸºç±»ï¼ˆçˆ¶ç±»ï¼‰ï¼Œå¹¶åœ¨å…¶ä¸­å£°æ˜ï¼ˆæˆ–å®ç°ï¼‰ä¸€ä¸ªé€šç”¨çš„æ–¹æ³•ï¼ˆæ¥å£ï¼‰ï¼Œç„¶åè®©å¤šä¸ªå­ç±»ç»§æ‰¿è¿™ä¸ªåŸºç±»å¹¶å„è‡ª**é‡å†™ï¼ˆOverrideï¼‰**è¯¥æ–¹æ³•ï¼Œå¯ä»¥æ¸…æ™°åœ°å»ºç«‹èµ·ä¸€ç»„å…·æœ‰å¤šæ€æ€§çš„ç±»ã€‚

```Python
class Animal:
    def speak(self):
        # å¯ä»¥æä¾›é»˜è®¤è¡Œä¸ºæˆ–å¼ºåˆ¶å­ç±»å®ç°
        raise NotImplementedError("å­ç±»å¿…é¡»å®ç° speak æ–¹æ³•")

class Horse(Animal):
    def speak(self):
        return "å˜¶å˜¶ï¼"

class Cow(Animal):
    def speak(self):
        return "å“å“ï¼"

# åŒæ ·ä½¿ç”¨ä¹‹å‰çš„ make_it_speak å‡½æ•°
make_it_speak(Horse()) # è¾“å‡º: å˜¶å˜¶ï¼
make_it_speak(Cow())   # è¾“å‡º: å“å“ï¼
```

åœ¨è¿™ä¸ªç»§æ‰¿çš„ä¾‹å­ä¸­ï¼Œ`Horse` å’Œ `Cow` éƒ½éµå¾ªäº† `Animal` å®šä¹‰çš„ `speak` æ¥å£ï¼ˆé€šè¿‡é‡å†™ï¼‰ï¼Œå› æ­¤å®ƒä»¬å¯ä»¥è¢« `make_it_speak` è¿™æ ·çš„å‡½æ•°å¤šæ€åœ°å¤„ç†ã€‚

### **å…¶ä»–å½¢å¼çš„å¤šæ€**

- **å‡½æ•°å¤šæ€**ï¼šåƒå†…ç½®çš„ `len()` å‡½æ•°ï¼Œå¯ä»¥ä½œç”¨äºå­—ç¬¦ä¸²ã€åˆ—è¡¨ã€å…ƒç»„ã€å­—å…¸ç­‰å¤šç§ç±»å‹çš„å¯¹è±¡ï¼Œè¿”å›å®ƒä»¬çš„é•¿åº¦ã€‚`len()` å¯¹ä¸åŒç±»å‹çš„å¯¹è±¡æ‰§è¡Œä¸åŒçš„å†…éƒ¨é€»è¾‘ï¼Œè¿™ä¹Ÿæ˜¯å¤šæ€ã€‚
- **æ“ä½œç¬¦å¤šæ€ï¼ˆæ“ä½œç¬¦é‡è½½ï¼‰**ï¼šåŒä¸€ä¸ªæ“ä½œç¬¦ï¼ˆå¦‚ `+`ï¼‰å¯ä»¥ç”¨äºæ•´æ•°/æµ®ç‚¹æ•°çš„åŠ æ³•ï¼Œä¹Ÿå¯ä»¥ç”¨äºå­—ç¬¦ä¸²/åˆ—è¡¨çš„è¿æ¥ã€‚è¿™æ˜¯é€šè¿‡åœ¨ç±»ä¸­å®šä¹‰ç‰¹æ®Šæ–¹æ³•ï¼ˆå¦‚ `__add__`ï¼‰æ¥å®ç°çš„ã€‚

### **æ€»ç»“**

Python ä¸­çš„å¤šæ€ä¸»è¦é€šè¿‡â€œé¸­å­ç±»å‹â€å®ç°ï¼Œå…³æ³¨å¯¹è±¡çš„è¡Œä¸ºï¼ˆæ˜¯å¦æœ‰æŸä¸ªæ–¹æ³•ï¼‰è€Œéå…¶ç±»å‹ã€‚è¿™ä½¿å¾—ä»£ç æ›´åŠ çµæ´»å’Œå¯æ‰©å±•ã€‚è™½ç„¶ä¸å¼ºåˆ¶è¦æ±‚ï¼Œä½†ç»§æ‰¿æ˜¯ç»„ç»‡å’Œå®ç°å¤šæ€çš„ä¸€ç§å¸¸ç”¨ä¸”æœ‰æ•ˆçš„æ–¹å¼ã€‚å¤šæ€å…è®¸æˆ‘ä»¬ç¼–å†™æ›´é€šç”¨ã€ç®€æ´çš„ä»£ç æ¥å¤„ç†ä¸åŒä½†å…·æœ‰ç›¸ä¼¼æ¥å£çš„å¯¹è±¡ã€‚





## å°è£…

å°è£…æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰çš„ä¸‰å¤§åŸºæœ¬ç‰¹æ€§ä¹‹ä¸€ï¼ˆå¦å¤–ä¸¤ä¸ªæ˜¯ç»§æ‰¿å’Œå¤šæ€ï¼‰ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š

1. **æ†ç»‘ï¼ˆBundlingï¼‰**ï¼šå°†æ•°æ®ï¼ˆå±æ€§/Attributesï¼‰å’Œæ“ä½œè¿™äº›æ•°æ®çš„æ–¹æ³•ï¼ˆMethodsï¼‰æ†ç»‘åœ¨ä¸€ä¸ªå•å…ƒï¼ˆå³ç±» Class / å¯¹è±¡ Objectï¼‰ä¸­ã€‚
2. **ä¿¡æ¯éšè—ï¼ˆInformation Hiding / Access Controlï¼‰**ï¼šéšè—å¯¹è±¡å†…éƒ¨çš„å¤æ‚ç»†èŠ‚å’ŒçŠ¶æ€ï¼ˆæ•°æ®ï¼‰ï¼Œåªå¯¹å¤–æš´éœ²æœ‰é™çš„ã€å¿…è¦çš„æ¥å£ï¼ˆé€šå¸¸æ˜¯å…¬æœ‰æ–¹æ³•ï¼‰ï¼Œä»¥ä¾›å¤–éƒ¨è®¿é—®æˆ–ä¿®æ”¹ã€‚è¿™å¯ä»¥ä¿æŠ¤å¯¹è±¡å†…éƒ¨æ•°æ®ä¸è¢«éšæ„ã€é”™è¯¯åœ°ä¿®æ”¹ï¼Œä¿è¯æ•°æ®çš„å®Œæ•´æ€§å’Œå®‰å…¨æ€§ã€‚

### **ä¸ºä»€ä¹ˆä½¿ç”¨å°è£…ï¼Ÿ**

1. **æ•°æ®ä¿æŠ¤ä¸å®Œæ•´æ€§ (Data Protection & Integrity)**ï¼šé˜²æ­¢å¤–éƒ¨ä»£ç ç›´æ¥ã€éšæ„åœ°è®¿é—®æˆ–ä¿®æ”¹å¯¹è±¡å†…éƒ¨çš„é‡è¦æ•°æ®ã€‚æ‰€æœ‰çš„æ•°æ®ä¿®æ”¹éƒ½å¿…é¡»é€šè¿‡å¯¹è±¡æä¾›çš„ç‰¹å®šæ–¹æ³•ï¼ˆä¾‹å¦‚ setter æ–¹æ³•ï¼‰æ¥è¿›è¡Œï¼Œè¿™äº›æ–¹æ³•å¯ä»¥åŠ å…¥éªŒè¯é€»è¾‘ï¼Œç¡®ä¿æ•°æ®çš„æœ‰æ•ˆæ€§ã€‚
2. **æ¨¡å—åŒ–ä¸é™ä½è€¦åˆ (Modularity & Reduced Coupling)**ï¼šå¯¹è±¡æˆä¸ºä¸€ä¸ªç‹¬ç«‹çš„ã€è‡ªåŒ…å«çš„å•å…ƒã€‚å¯¹è±¡çš„å†…éƒ¨å®ç°ç»†èŠ‚å¯ä»¥è¢«éšè—èµ·æ¥ï¼Œå¤–éƒ¨ä»£ç åªéœ€è¦çŸ¥é“å¦‚ä½•é€šè¿‡å…¶å…¬å…±æ¥å£ä¸ä¹‹äº¤äº’å³å¯ï¼Œè€Œä¸éœ€è¦å…³å¿ƒå…¶å†…éƒ¨æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚è¿™ä½¿å¾—ä¿®æ”¹å¯¹è±¡çš„å†…éƒ¨å®ç°ï¼ˆåªè¦ä¸æ”¹å˜å…¬å…±æ¥å£ï¼‰ä¸ä¼šå½±å“åˆ°ä½¿ç”¨è¯¥å¯¹è±¡çš„å…¶ä»–ä»£ç ã€‚
3. **æé«˜å¯ç»´æŠ¤æ€§ (Maintainability)**ï¼šå½“ç›¸å…³çš„æ•°æ®å’Œæ“ä½œé€»è¾‘è¢«ç»„ç»‡åœ¨ä¸€èµ·æ—¶ï¼Œä»£ç æ›´å®¹æ˜“ç†è§£ã€è°ƒè¯•å’Œç»´æŠ¤ã€‚
4. **éšè—å¤æ‚æ€§ (Hiding Complexity)**ï¼šå‘å¤–éƒ¨éšè—å¯¹è±¡å†…éƒ¨çš„å¤æ‚é€»è¾‘ï¼Œåªæä¾›ç®€å•çš„æ¥å£ä¾›ä½¿ç”¨ã€‚

### **Python ä¸­çš„å°è£…å®ç°**

ä¸å…¶ä»–ä¸€äº›è¯­è¨€ï¼ˆå¦‚ Javaã€C++ï¼‰ä¸åŒï¼ŒPython **æ²¡æœ‰æä¾›ä¸¥æ ¼çš„ `private`, `protected`, `public` è®¿é—®ä¿®é¥°ç¬¦å…³é”®å­—** æ¥å¼ºåˆ¶å®ç°å°è£…ã€‚Python çš„å°è£…æ›´å¤šåœ°ä¾èµ–äº **ç¨‹åºå‘˜ä¹‹é—´çš„çº¦å®šï¼ˆConventionsï¼‰** å’Œä¸€äº›è¯­è¨€ç‰¹æ€§ï¼ˆå¦‚åç§°ä¿®é¥°å’Œå±æ€§è£…é¥°å™¨ï¼‰ã€‚

1. **å…¬å¼€æˆå‘˜ (Public Members)**ï¼š

   - é»˜è®¤æƒ…å†µä¸‹ï¼ŒPython ç±»ä¸­çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•éƒ½æ˜¯å…¬å¼€çš„ã€‚

   - å¯ä»¥ä»ç±»çš„å†…éƒ¨æˆ–å¤–éƒ¨ç›´æ¥è®¿é—®ã€‚

   - ç¤ºä¾‹ï¼š

     ```Python
     class MyClass:
         def __init__(self, value):
             self.public_var = value # å…¬å¼€å±æ€§
     
         def public_method(self):   # å…¬å¼€æ–¹æ³•
             print(f"å…¬å…±æ–¹æ³•è¢«è°ƒç”¨ï¼Œå€¼ä¸º: {self.public_var}")
     
     obj = MyClass(10)
     print(obj.public_var)        # ç›´æ¥è®¿é—®å…¬å¼€å±æ€§
     obj.public_var = 20          # ç›´æ¥ä¿®æ”¹å…¬å¼€å±æ€§
     print(obj.public_var)
     obj.public_method()          # è°ƒç”¨å…¬å¼€æ–¹æ³•
     ```

2. **â€œå—ä¿æŠ¤â€æˆå‘˜ (Protected Members - Convention)**ï¼š

   - ä»¥ **å•ä¸ªä¸‹åˆ’çº¿ `_` å¼€å¤´** çš„å±æ€§æˆ–æ–¹æ³•ï¼ˆä¾‹å¦‚ `_protected_var`, `_protected_method`ï¼‰ã€‚

   - è¿™ **ä»…ä»…æ˜¯ä¸€ä¸ªçº¦å®š**ï¼Œç”¨æ¥æç¤ºå…¶ä»–ç¨‹åºå‘˜ï¼šâ€œè¿™ä¸ªæˆå‘˜æ„å›¾ç”¨äºç±»çš„å†…éƒ¨æˆ–å…¶å­ç±»ï¼Œä¸å»ºè®®åœ¨å¤–éƒ¨ç›´æ¥è®¿é—®ã€‚â€

   - Python è§£é‡Šå™¨ **ä¸ä¼š** é˜»æ­¢å¤–éƒ¨è®¿é—®è¿™äº›æˆå‘˜ã€‚å®ƒå®Œå…¨ä¾èµ–äºç¨‹åºå‘˜è‡ªè§‰éµå®ˆè¿™ä¸ªçº¦å®šã€‚

   - ç¤ºä¾‹ï¼š

     ```Python
     class MyClass:
         def __init__(self, value):
             self._protected_var = value # çº¦å®šä¸ºå—ä¿æŠ¤çš„å±æ€§
     
         def _protected_method(self): # çº¦å®šä¸ºå—ä¿æŠ¤çš„æ–¹æ³•
             print(f"å—ä¿æŠ¤çš„æ–¹æ³•è¢«è°ƒç”¨ï¼Œå€¼ä¸º: {self._protected_var}")
     
         def access_protected(self):
             print("åœ¨ç±»å†…éƒ¨è®¿é—®å—ä¿æŠ¤æˆå‘˜:")
             print(self._protected_var)
             self._protected_method()
     
     obj = MyClass(30)
     obj.access_protected()
     
     # è™½ç„¶ä¸æ¨èï¼Œä½†å¤–éƒ¨ä»ç„¶å¯ä»¥ç›´æ¥è®¿é—®
     print("\nåœ¨å¤–éƒ¨è®¿é—®å—ä¿æŠ¤æˆå‘˜ (ä¸æ¨è):")
     print(obj._protected_var)
     obj._protected_method()
     obj._protected_var = 40 # ä»ç„¶å¯ä»¥ä¿®æ”¹
     print(obj._protected_var)
     ```

3. **â€œç§æœ‰â€æˆå‘˜ (Private Members - Name Mangling)**ï¼š

   - ä»¥ **åŒä¸‹åˆ’çº¿ `__` å¼€å¤´** çš„å±æ€§æˆ–æ–¹æ³•ï¼ˆä¾‹å¦‚ `__private_var`, `__private_method`)ï¼Œå¹¶ä¸”ç»“å°¾**æ²¡æœ‰**åŒä¸‹åˆ’çº¿ã€‚

   - è¿™ä¼šè§¦å‘ Python çš„ **åç§°ä¿®é¥°ï¼ˆName Manglingï¼‰** æœºåˆ¶ã€‚Python è§£é‡Šå™¨ä¼šè‡ªåŠ¨å°†è¿™äº›åç§°é‡å‘½åä¸º `_ClassName__memberName` çš„å½¢å¼ï¼ˆä¾‹å¦‚ `_MyClass__private_var`ï¼‰ã€‚

   - **ä¸»è¦ç›®çš„**ï¼šæ˜¯ä¸ºäº† **é¿å…åœ¨å­ç±»ä¸­æ„å¤–è¦†ç›–çˆ¶ç±»çš„â€œç§æœ‰â€æˆå‘˜**ï¼Œè€Œä¸æ˜¯ä¸ºäº†å®ç°çœŸæ­£çš„ç§æœ‰æ€§ã€‚

   - è™½ç„¶ä¸èƒ½é€šè¿‡ `obj.__private_var` çš„æ–¹å¼ç›´æ¥è®¿é—®ï¼Œä½† **ä»ç„¶å¯ä»¥é€šè¿‡å…¶è¢«ä¿®é¥°åçš„åç§° `obj._ClassName__private_var` æ¥è®¿é—®**ï¼Œæ‰€ä»¥å®ƒå¹¶ä¸æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„ç§æœ‰ã€‚

   - ç¤ºä¾‹ï¼š

     ```Python
     class MyClass:
         def __init__(self, value):
             self.__private_var = value # "ç§æœ‰"å±æ€§
     
         def __private_method(self):   # "ç§æœ‰"æ–¹æ³•
             print(f"ç§æœ‰æ–¹æ³•è¢«è°ƒç”¨ï¼Œå€¼ä¸º: {self.__private_var}")
     
         def access_private(self):
             print("åœ¨ç±»å†…éƒ¨è®¿é—®ç§æœ‰æˆå‘˜:")
             print(self.__private_var)
             self.__private_method()
     
     obj = MyClass(50)
     obj.access_private()
     print(obj.__dict__) # {'_MyClass__private_var': 50}
     
     print("\nå°è¯•åœ¨å¤–éƒ¨è®¿é—®ç§æœ‰æˆå‘˜:")
     try:
         print(obj.__private_var) # è¿™ä¼šå¼•å‘ AttributeError
     except AttributeError as e:
         print(f"ç›´æ¥è®¿é—®å¤±è´¥: {e}")
     
     try:
         obj.__private_method()   # è¿™ä¹Ÿä¼šå¼•å‘ AttributeError
     except AttributeError as e:
         print(f"ç›´æ¥è°ƒç”¨å¤±è´¥: {e}")
     
     # é€šè¿‡åç§°ä¿®é¥°åçš„åå­—ä»ç„¶å¯ä»¥è®¿é—® (ä¸æ¨è)
     print("\né€šè¿‡åç§°ä¿®é¥°åçš„åå­—è®¿é—® (ä¸æ¨è):")
     print(obj._MyClass__private_var)
     obj._MyClass__private_method()
     obj._MyClass__private_var = 60 # ä»ç„¶å¯ä»¥ä¿®æ”¹
     print(obj._MyClass__private_var)
     ```



### ç§æœ‰æˆå‘˜çš„è®¿é—®

#### **ä½¿ç”¨ Getter å’Œ Setter æ–¹æ³•**

ç”±äºç§æœ‰å±æ€§ä¸èƒ½åœ¨å¤–éƒ¨ç›´æ¥è®¿é—®ï¼Œé€šå¸¸ä¼šæä¾› **getterï¼ˆè®¿é—®ï¼‰** å’Œ **setterï¼ˆä¿®æ”¹ï¼‰** æ–¹æ³•ã€‚

```python
class Person:
    def __init__(self, name, age):
        self.name = name
        self.__age = age

    def get_age(self):  # è·å–ç§æœ‰å±æ€§
        return self.__age

    def set_age(self, age):  # è®¾ç½®ç§æœ‰å±æ€§
        if age > 0:
            self.__age = age
        else:
            print("Age must be positive")

p = Person("David", 28)
print(p.get_age())  # 28
p.set_age(30)
print(p.get_age())  # 30
```



#### **ä½¿ç”¨å±æ€§è£…é¥°å™¨ (`@property`) å®ç°å—æ§è®¿é—® (The Pythonic Way)**ï¼š

- è¿™æ˜¯ä¸€ç§æ›´ Pythonicï¼ˆç¬¦åˆ Python é£æ ¼ï¼‰çš„æ–¹å¼æ¥å®ç°å¯¹å±æ€§è®¿é—®çš„æ§åˆ¶ï¼Œç±»ä¼¼äºå…¶ä»–è¯­è¨€ä¸­çš„ getter å’Œ setter æ–¹æ³•ï¼Œä½†ä½¿ç”¨èµ·æ¥æ›´ç®€æ´ã€‚

  - `@property`ï¼šå°†ä¸€**ä¸ªæ–¹æ³•å˜æˆä¸€ä¸ªåªè¯»å±æ€§**ã€‚
  - `@attribute_name.setter`ï¼šä¸ºè¯¥å±æ€§åˆ›å»ºä¸€ä¸ª setter æ–¹æ³•ï¼Œç”¨äºåœ¨èµ‹å€¼æ—¶è¿›è¡Œæ§åˆ¶æˆ–éªŒè¯ã€‚
  - `@attribute_name.deleter`ï¼šä¸ºè¯¥å±æ€§åˆ›å»ºä¸€ä¸ª deleter æ–¹æ³•ï¼Œç”¨äºåœ¨ä½¿ç”¨ `del` å…³é”®å­—æ—¶æ‰§è¡Œç‰¹å®šæ“ä½œã€‚

- ç¤ºä¾‹ï¼š

  ```Python
  
  class BankAccount:
      def __init__(self, initial_balance=0):
          # ä½¿ç”¨å•ä¸‹åˆ’çº¿è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªâ€œå†…éƒ¨â€å˜é‡
          if initial_balance < 0:
               raise ValueError("åˆå§‹ä½™é¢ä¸èƒ½ä¸ºè´Ÿ")
          self._balance = initial_balance
  
      # Getter: ä½¿ç”¨ @propertyï¼Œæ–¹æ³•åé€šå¸¸ä¸å†…éƒ¨å˜é‡åå»æ‰ä¸‹åˆ’çº¿åç›¸åŒ
      @property
      def balance(self):
          """è·å–è´¦æˆ·ä½™é¢ (åªè¯»å±æ€§)"""
          print("Getter for balance called")
          return self._balance
  
      # Setter: ä½¿ç”¨ @balance.setter
      @balance.setter
      def balance(self, value):
          """è®¾ç½®è´¦æˆ·ä½™é¢ï¼Œå¸¦éªŒè¯"""
          print(f"Setter for balance called with value {value}")
          if not isinstance(value, (int, float)):
              raise TypeError("ä½™é¢å¿…é¡»æ˜¯æ•°å­—")
          if value < 0:
              raise ValueError("ä½™é¢ä¸èƒ½è®¾ç½®ä¸ºè´Ÿæ•°")
          self._balance = value # éªŒè¯é€šè¿‡åæ‰ä¿®æ”¹å†…éƒ¨å˜é‡
  
      # Deleter (å¯é€‰): ä½¿ç”¨ @balance.deleter
      @balance.deleter
      def balance(self):
          """å¤„ç†åˆ é™¤ä½™é¢çš„æ“ä½œ (ä¾‹å¦‚ï¼Œæ¸…é›¶æˆ–æ ‡è®°è´¦æˆ·)"""
          print("Deleter for balance called")
          print("ä¸å…è®¸ç›´æ¥åˆ é™¤ä½™é¢å±æ€§ï¼Œå°†å…¶æ¸…é›¶ã€‚")
          self._balance = 0
  
  # --- ä½¿ç”¨ ---
  
  account = BankAccount(100)
  
  # è®¿é—®ä½™é¢ (åƒè®¿é—®å±æ€§ä¸€æ ·ï¼Œå®é™…è°ƒç”¨äº† getter æ–¹æ³•)
  print(f"å½“å‰ä½™é¢: {account.balance}") # è¾“å‡º: Getter for balance called \n å½“å‰ä½™é¢: 100
  
  # ä¿®æ”¹ä½™é¢ (åƒç»™å±æ€§èµ‹å€¼ä¸€æ ·ï¼Œå®é™…è°ƒç”¨äº† setter æ–¹æ³•)
  account.balance = 200
  print(f"ä¿®æ”¹åä½™é¢: {account.balance}") # è¾“å‡º: Setter for balance called... \n Getter for balance called... \n ä¿®æ”¹åä½™é¢: 200
  
  # å°è¯•è®¾ç½®æ— æ•ˆå€¼
  try:
      account.balance = -50
  except ValueError as e:
      print(f"è®¾ç½®æ— æ•ˆå€¼å¤±è´¥: {e}") # è¾“å‡º: Setter for balance called... \n è®¾ç½®æ— æ•ˆå€¼å¤±è´¥: ä½™é¢ä¸èƒ½è®¾ç½®ä¸ºè´Ÿæ•°
  
  # å°è¯•åˆ é™¤ä½™é¢ (è°ƒç”¨ deleter)
  del account.balance # è¾“å‡º: Deleter for balance called...
  print(f"åˆ é™¤åä½™é¢: {account.balance}") # è¾“å‡º: Getter for balance called... \n åˆ é™¤åä½™é¢: 0
  
  # å°è¯•ç›´æ¥è®¿é—®å†…éƒ¨å˜é‡ (è™½ç„¶å¯ä»¥ï¼Œä½†ä¸æ¨è)
  print(f"ç›´æ¥è®¿é—®å†…éƒ¨å˜é‡ (ä¸æ¨è): {account._balance}") # è¾“å‡º: ç›´æ¥è®¿é—®å†…éƒ¨å˜é‡ (ä¸æ¨è): 0
  account._balance = -1000 # ç›´æ¥ä¿®æ”¹ä¼šç»•è¿‡ setter çš„éªŒè¯é€»è¾‘ï¼
  print(f"ç»•è¿‡ setter ä¿®æ”¹å: {account._balance}") # è¾“å‡º: ç»•è¿‡ setter ä¿®æ”¹å: -1000
  
  
  ```

  

**æ€»ç»“**

- å°è£…æ˜¯å°†æ•°æ®å’Œæ“ä½œæ•°æ®çš„æ–¹æ³•æ†ç»‘åœ¨ä¸€èµ·ï¼Œå¹¶éšè—å†…éƒ¨ç»†èŠ‚ã€æ§åˆ¶å¤–éƒ¨è®¿é—®çš„è¿‡ç¨‹ã€‚
- Python ä¸»è¦é€šè¿‡**çº¦å®š**ï¼ˆå•ä¸‹åˆ’çº¿ `_` è¡¨ç¤ºä¿æŠ¤ï¼ŒåŒä¸‹åˆ’çº¿ `__` è¡¨ç¤ºåç§°ä¿®é¥°ä»¥é˜²å‘½åå†²çªï¼‰å’Œ**å±æ€§è£…é¥°å™¨ (`@property`, `@setter`, `@deleter`)** æ¥å®ç°å°è£…çš„ç›®æ ‡ã€‚
- Python ä¸å¼ºåˆ¶å®ç°ä¸¥æ ¼çš„ç§æœ‰æ€§ï¼Œæ›´å€¾å‘äºâ€œæˆ‘ä»¬éƒ½æ˜¯æˆå¹´äººâ€ï¼ˆWe are all consenting adults hereï¼‰çš„å“²å­¦ï¼Œç›¸ä¿¡ç¨‹åºå‘˜ä¼šéµå®ˆçº¦å®šã€‚
- ä½¿ç”¨ `@property` åŠå…¶ç›¸å…³çš„ setter/deleter æ˜¯åœ¨ Python ä¸­å®ç°æ•°æ®éªŒè¯å’Œå—æ§è®¿é—®çš„é¦–é€‰æ–¹å¼ï¼Œå®ƒæä¾›äº†æ¸…æ™°ã€ç®€æ´çš„è¯­æ³•ï¼ŒåŒæ—¶è¾¾åˆ°äº†å°è£…çš„æ ¸å¿ƒç›®çš„ã€‚





## é­”æ–¹æ–¹æ³•



Python ä¸­çš„**é­”æ³•æ–¹æ³•ï¼ˆMagic Methodsï¼‰**ï¼Œä¹Ÿç§°ä¸º**åŒä¸‹åˆ’çº¿æ–¹æ³•ï¼ˆDunder Methodsï¼‰**ï¼Œæ˜¯ç‰¹æ®Šçš„æ–¹æ³•ï¼Œé€šå¸¸ä»¥ `__`ï¼ˆåŒä¸‹åˆ’çº¿ï¼‰å¼€å¤´å’Œç»“å°¾ã€‚å®ƒä»¬å¯ä»¥é‡è½½è¿ç®—ç¬¦ã€å®šä¹‰ç±»çš„è¡Œä¸ºï¼Œä½¿ç±»æ›´åƒ Python å†…ç½®å¯¹è±¡ã€‚

### **1. é­”æ³•æ–¹æ³•åˆ†ç±»**

#### ï¼ˆ1ï¼‰**åˆå§‹åŒ–ä¸è¡¨ç¤º**

| æ–¹æ³•                            | ä½œç”¨                                         |
| ------------------------------- | -------------------------------------------- |
| `__init__(self, ...)`           | æ„é€ æ–¹æ³•ï¼Œåˆ›å»ºå¯¹è±¡æ—¶è‡ªåŠ¨è°ƒç”¨                 |
| `__new__(cls, ...)`             | åˆ›å»ºå®ä¾‹ï¼Œé€šå¸¸ä¸ `__init__` é…åˆä½¿ç”¨         |
| `__del__(self)`                 | ææ„æ–¹æ³•ï¼Œå¯¹è±¡é”€æ¯æ—¶è°ƒç”¨                     |
| `__repr__(self)`                | è¿”å›å¯¹è±¡çš„**å®˜æ–¹**å­—ç¬¦ä¸²è¡¨ç¤ºï¼Œç”¨äº `repr()`  |
| `__str__(self)`                 | è¿”å›å¯¹è±¡çš„**å¯è¯»**å­—ç¬¦ä¸²è¡¨ç¤ºï¼Œç”¨äº `print()` |
| `__format__(self, format_spec)` | æ ¼å¼åŒ–å¯¹è±¡ï¼Œç”¨äº `format()`                  |

```python
class Person:
    def __init__(self, name, age):
        self.name = name
        self.age = age

    def __repr__(self):
        return f"Person('{self.name}', {self.age})"

    def __str__(self):
        return f"My name is {self.name} and I am {self.age} years old."

p = Person("Alice", 25)
print(repr(p))  # Person('Alice', 25)
print(str(p))   # My name is Alice and I am 25 years old.
```

------

#### ï¼ˆ2ï¼‰**è¿ç®—ç¬¦é‡è½½**

| æ–¹æ³•                        | ä½œç”¨              |
| --------------------------- | ----------------- |
| `__add__(self, other)`      | `+` è¿ç®—ç¬¦é‡è½½    |
| `__sub__(self, other)`      | `-` è¿ç®—ç¬¦é‡è½½    |
| `__mul__(self, other)`      | `*` ä¹˜æ³•é‡è½½      |
| `__truediv__(self, other)`  | `/` é™¤æ³•é‡è½½      |
| `__floordiv__(self, other)` | `//` æ•´é™¤é‡è½½     |
| `__mod__(self, other)`      | `%` å–æ¨¡é‡è½½      |
| `__pow__(self, other)`      | `**` å¹‚è¿ç®—é‡è½½   |
| `__eq__(self, other)`       | `==` æ¯”è¾ƒé‡è½½     |
| `__ne__(self, other)`       | `!=` æ¯”è¾ƒé‡è½½     |
| `__lt__(self, other)`       | `<` å°äºæ¯”è¾ƒ      |
| `__le__(self, other)`       | `<=` å°äºç­‰äºæ¯”è¾ƒ |
| `__gt__(self, other)`       | `>` å¤§äºæ¯”è¾ƒ      |
| `__ge__(self, other)`       | `>=` å¤§äºç­‰äºæ¯”è¾ƒ |

```python
class Vector:
    def __init__(self, x, y):
        self.x = x
        self.y = y

    def __add__(self, other):
        return Vector(self.x + other.x, self.y + other.y)

    def __eq__(self, other):
        return self.x == other.x and self.y == other.y

    def __repr__(self):
        return f"Vector({self.x}, {self.y})"

v1 = Vector(2, 3)
v2 = Vector(1, 5)
print(v1 + v2)  # Vector(3, 8)
print(v1 == v2)  # False
```

------

#### ï¼ˆ3ï¼‰**å®¹å™¨ç±»ç›¸å…³**

| æ–¹æ³•                            | ä½œç”¨                         |
| ------------------------------- | ---------------------------- |
| `__len__(self)`                 | `len(obj)`ï¼Œè¿”å›å¯¹è±¡é•¿åº¦     |
| `__getitem__(self, key)`        | `obj[key]`ï¼Œè·å–å…ƒç´          |
| `__setitem__(self, key, value)` | `obj[key] = value`ï¼Œè®¾ç½®å…ƒç´  |
| `__delitem__(self, key)`        | `del obj[key]`ï¼Œåˆ é™¤å…ƒç´      |
| `__contains__(self, item)`      | `item in obj`ï¼Œæˆå‘˜æ£€æŸ¥      |

```python
class MyList:
    def __init__(self, items):
        self.items = list(items)

    def __len__(self):
        return len(self.items)

    def __getitem__(self, index):
        return self.items[index]

    def __setitem__(self, index, value):
        self.items[index] = value

    def __delitem__(self, index):
        del self.items[index]

    def __contains__(self, item):
        return item in self.items

ml = MyList([10, 20, 30])
print(len(ml))  # 3
print(ml[1])    # 20
ml[1] = 99
print(ml[1])    # 99
del ml[1]
print(ml.items)  # [10, 30]
print(10 in ml)  # True
```

------

#### ï¼ˆ4ï¼‰**å¯è°ƒç”¨å¯¹è±¡**

| æ–¹æ³•                              | ä½œç”¨                   |
| --------------------------------- | ---------------------- |
| `__call__(self, *args, **kwargs)` | è®©å®ä¾‹åƒå‡½æ•°ä¸€æ ·è¢«è°ƒç”¨ |

```python
class Counter:
    def __init__(self):
        self.count = 0

    def __call__(self):
        self.count += 1
        return self.count

c = Counter()
print(c())  # 1
print(c())  # 2
print(c())  # 3
```

------

#### ï¼ˆ5ï¼‰**ä¸Šä¸‹æ–‡ç®¡ç†**

| æ–¹æ³•                                             | ä½œç”¨                   |
| ------------------------------------------------ | ---------------------- |
| `__enter__(self)`                                | è¿›å…¥ `with` è¯­å¥æ—¶è°ƒç”¨ |
| `__exit__(self, exc_type, exc_value, traceback)` | é€€å‡º `with` è¯­å¥æ—¶è°ƒç”¨ |

```python
class MyFile:
    def __init__(self, filename, mode):
        self.filename = filename
        self.mode = mode

    def __enter__(self):
        self.file = open(self.filename, self.mode)
        return self.file

    def __exit__(self, exc_type, exc_value, traceback):
        self.file.close()

with MyFile("test.txt", "w") as f:
    f.write("Hello, world!")
```

------

### **6. æ€»ç»“**

- **é­”æ³•æ–¹æ³•å¯ä»¥é‡è½½è¿ç®—ç¬¦ã€å®šä¹‰å®¹å™¨è¡Œä¸ºã€å®ç°è‡ªå®šä¹‰ç±»çš„ç‰¹æ®ŠåŠŸèƒ½**ã€‚
- **å°½é‡è®©ç±»è¡Œä¸ºç¬¦åˆ Python è¯­è¨€çš„ç›´è§‰ï¼ˆæ¯”å¦‚ `len()`ã€`+` è¿ç®—ï¼‰**ï¼Œæé«˜å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚
- **æ³¨æ„ `__enter__` å’Œ `__exit__` å¯ç”¨äºä¸Šä¸‹æ–‡ç®¡ç†ï¼Œæ¨èç”¨äºæ–‡ä»¶ã€æ•°æ®åº“ç­‰èµ„æºç®¡ç†**ã€‚

è¿™äº›é­”æ³•æ–¹æ³•èƒ½è®© Python ç±»å˜å¾—æ›´åŠ **ä¼˜é›…**å’Œ**å¼ºå¤§**ï¼Œç†è§£å®ƒä»¬èƒ½å¸®åŠ©ä½ å†™å‡ºæ›´ Pythonic çš„ä»£ç ï¼ ğŸš€





## æœ¬ç« æ€»ç»“

### æ€ç»´å¯¼å›¾æ€»ç»“

![image-20250403000947723](./images/ç¬¬11ç«  é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡/image-20250403000947723.png)

| æ–¹æ³•/è£…é¥°å™¨     | åŠŸèƒ½æè¿°                   |
| --------------- | -------------------------- |
| `__dict__`      | æŸ¥çœ‹å®ä¾‹çš„æ‰€æœ‰å±æ€§         |
| `dir() `        | æŸ¥çœ‹å®ä¾‹çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•   |
| `__init__() `   | ç±»çš„åˆå§‹åŒ–å‡½æ•°             |
| `@classmethod`  | è£…é¥°å™¨ï¼Œè¡¨ç¤ºç±»æ–¹æ³•         |
| `@staticmethod` | è£…é¥°å™¨ï¼Œè¡¨ç¤ºé™æ€æ–¹æ³•       |
| `@property`     | è£…é¥°å™¨ï¼ŒæŠŠæ–¹æ³•å˜æˆå±æ€§è®¿é—® |
| `@å±æ€§.setter`  | è£…é¥°å™¨ï¼Œè®¾ç½®ç§æœ‰å±æ€§çš„å€¼   |



### å•è¯

| å•è¯     | é‡Šä¹‰       |
| -------- | ---------- |
| class    | ç±»         |
| dict     | å­—å…¸       |
| dir      | ç›®å½•       |
| property | å±æ€§ï¼›ç‰¹æ€§ |
| static   | é™æ€çš„     |
| init     | åˆå§‹åŒ–     |
| abstract | æŠ½è±¡çš„     |
| method   | æ–¹æ³•       |
| set      | è®¾ç½®       |
| get      | è·å–       |
| super    | éå¸¸çš„     |
| self     | è‡ªå·±çš„     |



### å°è¯•ç‰›åˆ€

åœ¨Pythonä¸­ï¼Œå“ªä¸ªå…³é”®å­—ç”¨äºå®šä¹‰ä¸€ä¸ªç±»ï¼Ÿ

A. class 

B. function 

C. def 

D. type

ç­”æ¡ˆï¼šA



ä¸‹åˆ—å…³äºPythonç±»ä¸­çš„æ–¹æ³•çš„æè¿°ï¼Œå“ªä¸€ä¸ªæ˜¯é”™è¯¯çš„ï¼Ÿ

A.å®ä¾‹æ–¹æ³•æ˜¯ä¸ç±»çš„å®ä¾‹ç»‘å®šçš„æ–¹æ³•ï¼Œéœ€è¦é€šè¿‡å®ä¾‹æ¥è°ƒç”¨ã€‚

B.ç±»æ–¹æ³•æ˜¯ä¸ç±»æœ¬èº«ç»‘å®šçš„æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨ç±»åç›´æ¥è°ƒç”¨ã€‚

C.é™æ€æ–¹æ³•æ—¢ä¸ä¸å®ä¾‹ç»‘å®šï¼Œä¹Ÿä¸ä¸ç±»ç»‘å®šï¼Œå®ƒåªæ˜¯ä¸€ä¸ªæ™®é€šçš„å‡½æ•°ã€‚

D.æ‰€æœ‰ç±»çš„æ–¹æ³•éƒ½å¿…é¡»æ˜¾å¼åœ°å®šä¹‰selfå‚æ•°æ¥ä»£è¡¨ç±»çš„å®ä¾‹ã€‚

ç­”æ¡ˆï¼šD



åœ¨Pythonä¸­ï¼Œå¦‚æœä¸€ä¸ªç±»æ²¡æœ‰æ˜¾å¼åœ°å®šä¹‰__init__æ–¹æ³•ï¼Œé‚£ä¹ˆå½“åˆ›å»ºè¯¥ç±»çš„å®ä¾‹æ—¶ï¼ŒPythonä¼šåšä»€ä¹ˆï¼Ÿ

A.æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸ºå¿…é¡»å®šä¹‰__init__æ–¹æ³•ã€‚ 

B.éšå¼åœ°å®šä¹‰ä¸€ä¸ª__init__æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä»€ä¹ˆéƒ½ä¸åšã€‚

C.éšå¼åœ°å®šä¹‰ä¸€ä¸ª__init__æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†å®ä¾‹çš„æ‰€æœ‰å±æ€§åˆå§‹åŒ–ä¸ºNoneã€‚ 

D.éšå¼åœ°å®šä¹‰ä¸€ä¸ª__init__æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†å®ä¾‹çš„æ‰€æœ‰å±æ€§åˆå§‹åŒ–ä¸ºç©ºã€‚

ç­”æ¡ˆï¼šB

ä¸‹åˆ—å…³äºPythonä¸­çš„ç»§æ‰¿çš„æè¿°ï¼Œå“ªä¸€ä¸ªæ˜¯æ­£ç¡®çš„ï¼Ÿ 

A.åœ¨Pythonä¸­ï¼Œä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿è‡ªä¸€ä¸ªçˆ¶ç±»ã€‚

B.Pythonæ”¯æŒå¤šé‡ç»§æ‰¿ï¼Œå³ä¸€ä¸ªç±»å¯ä»¥ç»§æ‰¿è‡ªå¤šä¸ªçˆ¶ç±»ã€‚

C.Pythonä¸­çš„ç»§æ‰¿æ˜¯æŒ‰ç…§æ·±åº¦ä¼˜å…ˆçš„é¡ºåºè¿›è¡Œçš„ã€‚

D.åœ¨Pythonä¸­ï¼Œå­ç±»çš„å±æ€§ä¼šè¦†ç›–çˆ¶ç±»çš„åŒåå±æ€§ã€‚

ç­”æ¡ˆï¼šB

ä¸‹åˆ—å“ªä¸ªé€‰é¡¹ä¸æ˜¯Pythonä¸­ç‰¹æ®Šæ–¹æ³•ï¼ˆé­”æ³•æ–¹æ³•ï¼‰çš„ä¾‹å­ï¼Ÿ

A.init

B.str 

C.add 

D.import

ç­”æ¡ˆï¼šD



åœ¨Pythonä¸­ï¼Œselfå‚æ•°åœ¨ç±»çš„æ–¹æ³•ä¸­ä»£è¡¨ä»€ä¹ˆï¼Ÿ 

A.ç±»çš„å®ä¾‹ 

B.ç±»æœ¬èº« 

C.çˆ¶ç±» 

D.æ–¹æ³•çš„è¿”å›å€¼

ç­”æ¡ˆï¼šA



Pythonä¸­çš„super()å‡½æ•°ç”¨äºä»€ä¹ˆç›®çš„ï¼Ÿ 

A. è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•° 

B. è°ƒç”¨çˆ¶ç±»çš„ä»»æ„æ–¹æ³• 

C. è·å–çˆ¶ç±»å®ä¾‹ 

D. è®¿é—®çˆ¶ç±»çš„å±æ€§

ç­”æ¡ˆï¼šB



Pythonä¸­çš„@propertyè£…é¥°å™¨ç”¨äºä»€ä¹ˆç›®çš„ï¼Ÿ 

A. å®šä¹‰ä¸€ä¸ªç±»çš„å®ä¾‹æ–¹æ³• 

B. å®šä¹‰ä¸€ä¸ªç±»çš„ç±»æ–¹æ³• 

C. å°†ä¸€ä¸ªæ–¹æ³•è½¬æ¢ä¸ºå±æ€§çš„getteræ–¹æ³• 

D. å°†ä¸€ä¸ªæ–¹æ³•è½¬æ¢ä¸ºå±æ€§çš„setteræ–¹æ³•

ç­”æ¡ˆï¼šC



Pythonä¸­çš„@classmethodè£…é¥°å™¨ç”¨äºä»€ä¹ˆç›®çš„ï¼Ÿ 

A. å°†ä¸€ä¸ªæ–¹æ³•è½¬æ¢ä¸ºå±æ€§çš„getteræ–¹æ³• 

B. å°†ä¸€ä¸ªæ–¹æ³•è½¬æ¢ä¸ºå±æ€§çš„setteræ–¹æ³• 

C. å®šä¹‰ä¸€ä¸ªç±»çš„ç±»æ–¹æ³• 

D. å®šä¹‰ä¸€ä¸ªç±»çš„é™æ€æ–¹æ³•

ç­”æ¡ˆC



Pythonä¸­çš„@propertyè£…é¥°å™¨ç”¨äºä»€ä¹ˆç›®çš„ï¼Ÿ 

A. å®šä¹‰ä¸€ä¸ªç±»çš„å®ä¾‹æ–¹æ³• 

B. å®šä¹‰ä¸€ä¸ªç±»çš„ç±»æ–¹æ³• 

C. å°†ä¸€ä¸ªæ–¹æ³•è½¬æ¢ä¸ºå±æ€§çš„getteræ–¹æ³• 

D. å°†ä¸€ä¸ªæ–¹æ³•è½¬æ¢ä¸ºå±æ€§çš„setteræ–¹æ³•

ç­”æ¡ˆï¼šC

